typeof progress=="function"&&progress("jet.all.js loaded");(function(){var d=this,a=d.Jx,i={},j={},b={NO_DEBUG:0,SHOW_ALL:1},e={debug:1},h=function(a,b,d){a=String(a);e.debug&&this.console&&(this.console.out?this.console.out(a,b,d):alert(a+" - \u6d88\u606f\u7c7b\u578b["+d+"]"));return a};try{if(typeof a==="undefined"||a.mark&&a.mark==="JxMark"){if(a)i=a.VERSIONS,j=a.PACKAGES;a=function(b,d){var e=this;if(d)this._init();else if(b){b=String(b);try{if(a.VERSIONS[b])e=a.VERSIONS[b];else throw e=a.VERSIONS[a.DEFAULT_VERSION],Error("\u6ca1\u6709\u627e\u5230 JET version "+b+", \u6240\u4ee5\u8fd4\u56de\u9ed8\u8ba4\u7248\u672c JET version "+a.DEFAULT_VERSION+"!");}catch(g){e.out("A.\u9519\u8bef\uff1a["+g.name+"] "+g.message+", "+g.fileName+", \u884c\u53f7:"+g.lineNumber+"; stack:"+typeof g.stack,2)}}else e=a.VERSIONS[a.DEFAULT_VERSION];return e};a.prototype={version:"1.0",DEBUG:b,option:e,_init:function(){this.constructor=a},$namespace:function(a){for(var b,d=a.split("."),e=window,a=0;a<d.length;a+=1)b=d[a],e[b]=e[b]||{},e=e[d[a]];return e},$package:function(){var b=arguments[0],e=arguments[arguments.length-1],g=d;if(typeof e==="function")typeof b==="string"?(g=this.$namespace(b),a.PACKAGES[b]||(a.PACKAGES[b]={isLoaded:!0,returnValue:void 0}),g.packageName=b):typeof b==="object"&&(g=b),e.call(g,this);else throw Error("Function required");},checkPackage:function(b){return a.PACKAGES[b]},out:h,debug:function(){},profile:function(){},warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}};a.VERSIONS=i;a.PACKAGES=j;a.VERSIONS["1.0"]=new a("1.0",!0);a.DEFAULT_VERSION="1.0";a.mark="JxMark";d.Jet=d.Jx=a}else throw Error('"Jx" name is defined in other javascript code !!!');}catch(g){h("JET \u5fae\u5185\u6838\u521d\u59cb\u5316\u5931\u8d25! B.\u9519\u8bef\uff1a["+g.name+"] "+g.message+", "+g.fileName+", \u884c\u53f7:"+g.lineNumber+"; stack:"+typeof g.stack,1)}})();Jx().$package(function(d){var a,i,j,b,e,h,g,f,n,k,o;a=function(c){return typeof c==="undefined"};i=function(c){return c===null};j=function(c){return(c===0||c)&&c.constructor===Number};e=function(c){return(c===!1||c)&&c.constructor===Boolean};b=function(c){return(c===""||c)&&c.constructor===String};h=function(c){return c&&c.constructor===Object||String(c)==="[object Object]"};g=function(c){return c&&c.constructor===Array||Object.prototype.toString.call(c)==="[object Array]"};f=function(c){return c&&c.callee&&j(c.length)?!0:!1};n=function(c){return c&&c.constructor===Function};k=function(c,l,a){var b=arguments,d,e;b.length===1?(c=this,b=0):(c=b[0]||{},b=1);for(;b<arguments.length;b++)for(d in e=arguments[b],e){var f=c[d],g=e[d];f!==g&&(g&&h(g)&&!g.nodeType&&!n(g)?(f=c[d]||{},c[d]=k(f,g||(g.length!=null?[]:{}))):g!==void 0&&(c[d]=g))}return c};o=function(){var c=arguments.length,l=arguments[c-1];l.init=l.init||function(){};if(c===2){var c=arguments[0].extend,a=function(){};a.prototype=c.prototype;var b=function(){this.init.apply(this,arguments)};b.superClass=c.prototype;b.callSuper=function(c,l){var a=Array.prototype.slice,d=a.call(arguments,2);(l=b.superClass[l])&&l.apply(c,d.concat(a.call(arguments)))};b.prototype=new a;b.prototype.constructor=b;d.extend(b.prototype,l);b.prototype.init=function(){l.init.apply(this,arguments)};return b}else if(c===1)return c=function(){return this.init.apply(this,arguments)},c.prototype=l,c};var p=new o({init:function(c,l,a,b,d){var e=c.concat();b&&(e=c);this.timeout=window.setTimeout(function(){var b=+new Date;do l.call(a,e.shift());while(e.length>0&&+new Date-b<50);e.length>0?this.timeout=window.setTimeout(arguments.callee,25):d&&d(c)},25)},stop:function(){clearTimeout(this.timeout)}});d.isUndefined=a;d.isNull=i;d.isNumber=j;d.isString=b;d.isBoolean=e;d.isObject=h;d.isArray=g;d.isArguments=f;d.isFunction=n;d.$typeof=function(c){return a(c)?"undefined":i(c)?"null":j(c)?"number":e(c)?"boolean":b(c)?"string":h(c)?"object":g(c)?"array":f(c)?"arguments":n(c)?"function":"other"};d.$return=function(c){return d.isFunction(c)?c:function(){return c}};d.$try=function(){var c,l=arguments.length,a;for(c=0;c<l;c++)try{a=arguments[c]();break}catch(b){d.out("C.\u9519\u8bef\uff1a["+b.name+"] "+b.message+", "+b.fileName+", \u884c\u53f7:"+b.lineNumber+"; stack:"+typeof b.stack,2)}return a};d.emptyFunc=function(){};d.clone=function(c){var a=function(){};a.prototype=c;return new a};d.getLength=function(c){var a,b=0;for(a in c)c.hasOwnProperty(a)&&b++;return b};d.checkJSON=function(){return!0};d.random=function(c,a){return Math.floor(Math.random()*(a-c+1)+c)};d.extend=k;d.now=function(){return+new Date};d.timedChunk=function(c,a,b,d,e){var f=c.concat();d&&(f=c);window.setTimeout(function(){var d=+new Date;do a.call(b,f.shift());while(f.length>0&&+new Date-d<50);f.length>0?window.setTimeout(arguments.callee,25):e&&e(c)},25)};d.rebuild=function(c,a){a=a||{};c.$$rebuildedFunc=c.$$rebuildedFunc||function(){var b,d;b=a.contextObj||this;d=Array.prototype.slice.call(arguments,0);d!==void 0&&(d=d.concat(a.arguments));a.event===!1&&(d=d.slice(1));return c.apply(b,d)};return c.$$rebuildedFunc};d.pass=function(c,a){var b=Array.prototype.slice,d=b.call(arguments,1);return function(){return c.apply(this,d.concat(b.call(arguments)))}};d.bind=function(c,a,b){var d=Array.prototype.slice,e=d.call(arguments,2);return function(){return c.apply(a,e.concat(d.call(arguments)))}};d.bindNoEvent=void 0;d.Class=o;d.Chunk=p});Jx().$package(function(d){d.browserOptions={adjustBehaviors:!0,htmlClass:!0};d.host=window.location.host;var a=navigator.platform.toLowerCase(),i=navigator.userAgent.toLowerCase(),j=navigator.plugins,b,e,h,g,f;g=function(a,b){a=(""+a).replace(/_/g,".");b=b||1;a=String(a).split(".");a=a[0]+"."+(a[1]||"0");return a=Number(a).toFixed(b)};b={getPlatform:function(){return a},name:window.orientation!=void 0?"iPod":(a.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0,set:function(a,b){this.name=a;this.version=b;this[a]=b}};b[b.name]=!0;(f=i.match(/windows ([\d.]+)/))?b.set("win",g(f[1])):(f=i.match(/windows nt ([\d.]+)/))?b.set("win",g(f[1])):(f=i.match(/linux ([\d.]+)/))?b.set("linux",g(f[1])):(f=i.match(/mac ([\d.]+)/))?b.set("mac",g(f[1])):(f=i.match(/ipod ([\d.]+)/))?b.set("iPod",g(f[1])):(f=i.match(/ipad[\D]*os ([\d_]+)/))?b.set("iPad",g(f[1])):(f=i.match(/iphone ([\d.]+)/))?b.set("iPhone",g(f[1])):(f=i.match(/android ([\d.]+)/))&&b.set("android",g(f[1]));e={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return j},plugins:{flash:function(){var a=0;if(j&&j.length){var b=j["Shockwave Flash"];b&&b.description&&(a=g(b.description.match(/\b(\d+)\.\d+\b/)[1],1)||a)}else for(b=13;b--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b);a=g(b);break}catch(c){}return a}()},getUserAgent:function(){return i},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0,set:function(a,b){this.name=a;this.version=b;this[a]=b}};(f=i.match(/msie ([\d.]+)/))?e.set("ie",g(f[1])):(f=i.match(/firefox\/([\d.]+)/))?e.set("firefox",g(f[1])):(f=i.match(/chrome\/([\d.]+)/))?e.set("chrome",g(f[1])):(f=i.match(/opera.([\d.]+)/))?e.set("opera",g(f[1])):(f=i.match(/adobeair\/([\d.]+)/))?e.set("adobeAir",g(f[1])):(f=i.match(/version\/([\d.]+).*safari/))&&e.set("safari",g(f[1]));(f=i.match(/version\/([\d.]+).*mobile.*safari/))&&e.set("mobileSafari",g(f[1]));b.iPad&&e.set("mobileSafari","0.0");if(e.ie)document.documentMode?document.documentMode!==Math.floor(e.ie)&&e.set("ie",g(document.documentMode)):document.documentMode=Math.floor(e.ie);h={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(a,b){this.name=a;this.version=b;this[a]=b}};(f=i.match(/trident\/([\d.]+)/))?h.set("trident",g(f[1])):(f=i.match(/gecko\/([\d.]+)/))?h.set("gecko",g(f[1])):(f=i.match(/applewebkit\/([\d.]+)/))?h.set("webkit",g(f[1])):(f=i.match(/presto\/([\d.]+)/))&&h.set("presto",g(f[1]));e.ie&&(e.ie==6?h.set("trident",g("4")):(e.ie==7||e.ie==8)&&h.set("trident",g("5")));if(d.browserOptions.adjustBehaviors&&e.ie&&e.ie<7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}var k=function(a){return String(a).replace(/\./gi,"_")};d.browserOptions.htmlClass&&function(){var a=document.documentElement,d=[a.className];d.push("javascriptEnabled");d.push(b.name);d.push(b.name+k(b.version));d.push(e.name);d.push(e.name+k(e.version));document.documentMode&&d.push("documentMode_"+document.documentMode);d.push(h.name);d.push(h.name+k(h.version));e.plugins.flash&&(d.push("flash"),d.push("flash"+k(e.plugins.flash)));a.className=d.join(" ")}();d.platform=b;d.browser=e;d.browser.engine=h});Jx().$package(function(d){var a,i,j,b,e,h,g,f,n,k,o,p,c,l,q=null,v,s,m,A;d.dom=d.dom||{};a=d.dom;i=a.win?a.win.contentWindow:a.win||window;a.win=i;a.doc=i.document;s=function(){return m?m:m=document.compatMode==="CSS1Compat"?document.documentElement:document.body};l=function(c){c?(c=c||window.document,q=c.nodeType===9?c:c.ownerDocument||a.doc):q||(c=c||window.document,q=c.nodeType===9?c:c.ownerDocument||a.doc);return q};v=function(c){var b=l(c);return c.document?c:b.defaultView||b.parentWindow||a.win};i=function(c,a){a=a||l();return a.getElementsByTagName(c)};n=function(c){return(c?c.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft))||0};k=function(c){return(c?c.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop))||0};j=function(c,a){return RegExp("(^|\\s)"+a+"(\\s|$)").test(c.className)};b=function(c,a){if(!j(c,a))c.className=c.className+" "+a};e=function(c,a){c.className=c.className.replace(RegExp("(^|\\s)"+a+"(?:\\s|$)"),"$1")};h=function(c,a,b){if(c){var l=d.browser.name;if(a==="float"||a==="cssFloat")a=l==="ie"?"styleFloat":"cssFloat";if(a==="opacity"&&l==="ie"&&d.browser.ie<9){if(c.style.filter='alpha(opacity="'+b*100+'")',!c.style.zoom)c.style.zoom=1}else c.style[a]=b}};g=function(c,a){if(c){var b=v(c),l=d.browser.name;if(a==="float"||a==="cssFloat")a=l==="ie"?"styleFloat":"cssFloat";if(a==="opacity"&&l==="ie"&&d.browser.ie<9)return b=1,(l=c.style.filter.match(/opacity=(\d+)/))&&l[1]&&(b=l[1]/100),b;if(c.style[a])return c.style[a];else if(c.currentStyle)return c.currentStyle[a];else if(b.getComputedStyle)return b.getComputedStyle(c,null)[a];else if(document.defaultView&&document.defaultView.getComputedStyle)return a=a.replace(/([/A-Z])/g,"-$1"),a=a.toLowerCase(),(b=document.defaultView.getComputedStyle(c,""))&&b.getPropertyValue(a)}};f=function(c,a){c.style.cssText=a};o=function(c){var a=0,b=0;if(c)if(document.documentElement.getBoundingClientRect&&c.getBoundingClientRect){b={left:0,top:0,right:0,bottom:0};try{b=c.getBoundingClientRect()}catch(l){return[0,0]}var c=c.ownerDocument,e=d.browser.ie?2:0,a=b.top-e+k(c),b=b.left-e+n(c)}else for(;c.offsetParent;)a+=c.offsetTop,b+=c.offsetLeft,c=c.offsetParent;return[b,a]};p=function(c){c=o(c);c[0]+=n();c[1]+=k();return c};c=function(c,a,b){var l=parseInt(g(c,"marginLeft"))||0,d=parseInt(g(c,"marginTop"))||0;h(c,"left",parseInt(a)-l+"px");h(c,"top",parseInt(b)-d+"px")};for(var u=function(c){return!c||c=="auto"?0:parseInt(c.substr(0,c.length-2))},w=i("script"),y=0;y<w.length;y++)if(w[y].getAttribute("hasJx")=="true")d.src=w[y].src;if(!d.src)d.src=w[w.length-1].src;d.filename=d.src.replace(/(.*\/){0,}([^\\]+).*/ig,"$2");d.path=d.src.split(d.filename)[0];a.getDoc=l;a.id=function(c,a){return l(a).getElementById(c)};a.name=function(c,a){return l(a).getElementsByName(c)};a.tagName=i;a.getText=function(c){var a=c?c[TEXT_CONTENT]:"";a===UNDEFINED&&INNER_TEXT in c&&(a=c[INNER_TEXT]);return a||""};a.getAttributeByParent=function(c,a,b){var l=!1,e;do e=a.getAttribute(c),d.isUndefined(e)||d.isNull(e)?a===b?l=!0:a=a.parentNode:l=!0;while(!l);return e};a.node=function(c,a){var b,l=document.createElement(c),d={"class":function(){l.className=a["class"]},style:function(){f(l,a.style)}};for(b in a)if(d[b])d[b]();else l.setAttribute(b,a[b]);return l};a.setClass=function(c,a){c.className=a};a.getClass=function(c){return c.className};a.hasClass=j;a.addClass=b;a.removeClass=e;a.toggleClass=function(c,a){return j(c,a)?e(c,a):b(c,a)};a.replaceClass=function(c,a,l){e(c,a);b(c,l)};a.createStyleNode=function(c,b){var l=a.node("style",{id:b||"",type:"text/css"});if(l.styleSheet)l.styleSheet.cssText=c;else{var d=document.createTextNode(c);l.appendChild(d)}a.getDocHead().appendChild(l);return l};a.setStyle=h;a.getStyle=g;a.setCssText=f;a.getCssText=function(c){return c.style.cssText};a.addCssText=function(c,a){c.style.cssText+=";"+a};a.show=function(c,a){var b;b=(b=c.getAttribute("_oldDisplay"))?b:g(c,"display");a?h(c,"display",a):b==="none"?h(c,"display","block"):h(c,"display",b)};a.isShow=function(c){return g(c,"display")==="none"?!1:!0};a.recover=function(c){var a;a=(a=c.getAttribute("_oldDisplay"))?a:g(c,"display");a==="none"?h(c,"display",""):h(c,"display",a)};a.hide=function(c){var a=g(c,"display");c.getAttribute("_oldDisplay")||(a==="none"?c.setAttribute("_oldDisplay",""):c.setAttribute("_oldDisplay",a));h(c,"display","none")};a.getScrollLeft=n;a.getScrollTop=k;a.getScrollHeight=function(c){return(c?c.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))||0};a.getScrollWidth=function(c){return(c?c.scrollWidth:Math.max(document.documentElement.scrollWidth,document.body.scrollWidth))||0};a.getClientHeight=function(c){c=c||s();return c.clientHeight};a.getClientWidth=function(c){c=c||s();return c.clientWidth};a.getOffsetHeight=function(c){c=c||s();return c.offsetHeight};a.getOffsetWidth=function(c){c=c||s();return c.offsetWidth};a.getClientXY=o;a.setClientXY=function(a,b,l){b=parseInt(b)+n();l=parseInt(l)+k();c(a,b,l)};a.getXY=p;a.setXY=c;a.getRelativeXY=function(c,a){var b=p(c),l=p(a),d=[];d[0]=b[0]-l[0];d[1]=b[1]-l[1];return d};a.getPosX=function(c){return u(a.getStyle(c,"left"))};a.getPosY=function(c){return u(a.getStyle(c,"top"))};a.getWidth=function(c){return u(a.getStyle(c,"width"))};a.getHeight=function(c){return u(a.getStyle(c,"height"))};a.getSelection=void 0;a.getSelectionText=function(c){var c=c||window,a=c.document;if(c.getSelection)return c.getSelection().toString();else if(a.getSelection)return a.getSelection();else if(a.selection)return a.selection.createRange().text};a.getTextFieldSelection=function(c){return c.selectionStart!=void 0&&c.selectionEnd!=void 0?c.value.substring(c.selectionStart,c.selectionEnd):""};a.getDocumentElement=s;a.getDocHead=function(){if(!A){var c=l();A=c.getElementsByTagName("head")?c.getElementsByTagName("head")[0]:c.documentElement}return A};a.contains=function(c,a,b){if(!b&&c===a)return!1;if(c.compareDocumentPosition){if(c=c.compareDocumentPosition(a),c==20||c==0)return!0}else if(c.contains(a))return!0;return!1}});Jx().$package(function(d){var a,i,j,b,e,h,g=[],f,n,k,o,p;d.event=d.event||{};a=d.event;p=function(c,a){if(!c)c=window.event;var a=a||c.srcElement,b=document,e=b.documentElement,b=b.body,e={_event:c,type:c.type,target:c.srcElement,currentTarget:a,relatedTarget:c.fromElement?c.fromElement:c.toElement,eventPhase:c.srcElement==a?2:3,clientX:c.clientX,clientY:c.clientY,screenX:c.screenX,screenY:c.screenY,layerX:c.offsetX,layerY:c.offsetY,pageX:c.clientX+(e&&e.scrollLeft||b&&b.scrollLeft||0)-(e&&e.clientLeft||b&&b.clientLeft||0),pageY:c.clientY+(e&&e.scrollTop||b&&b.scrollTop||0)-(e&&e.clientTop||b&&b.clientTop||0),wheelDelta:c.wheelDelta||-40*(c.detail||0),altKey:c.altKey,ctrlKey:c.ctrlKey,shiftKey:c.shiftKey,charCode:c.keyCode,keyCode:c.keyCode,stopPropagation:function(){this._event.cancelBubble=!0},preventDefault:function(){this._event.returnValue=!1}},b=c.type.toLowerCase();if(b=="mouseover")e.relatedTarget=c.fromElement;else if(b=="mouseout")e.relatedTarget=c.toElement;if(!d.isUndefined(c.button)){var b=c.button,f={0:-1,1:0,2:2,3:-1,4:1};e.button=d.isUndefined(f[b])?b:f[b]}return e};d.browser.ie?(i=function(c,a,b,d){if(h["on"+a])h["on"+a](c,a,b,d);else j(c,a,b)},j=function(c,b,d){if(a._find(arguments)==-1){var e=function(a){a=p(a,c);Function.prototype.call?d.call(c,a):(c._currentHandler=d,c._currentHandler(a),c._currentHandler=null)};c.attachEvent("on"+b,e);var e={element:c,eventType:b,handler:d,wrappedEvent:e},f=(c.document||c).parentWindow||window,g=a._uid();if(!f._allHandlers)f._allHandlers={};f._allHandlers[g]=e;if(!c._handlers)c._handlers=[];c._handlers.push(g);if(!f._onunloadEventRegistered)f._onunloadEventRegistered=!0,f.attachEvent("onunload",a._removeAllEvents)}},b=function(c,a,b){if(h["off"+a])h["off"+a](c,a,b);else arguments.length==3?e(c,a,b):e(c,a)},e=function(c,b,d){var e=a._find(arguments);if(e!=-1){for(var f=(c.document||c).parentWindow||window,g=0;g<e.length;g++){var i=e[g],k=c._handlers[i],h=f._allHandlers[k];c.detachEvent("on"+h.eventType,h.wrappedEvent);c._handlers[i]=null;c._handlers.splice(i,1);delete f._allHandlers[k]}if(c._handlers&&c._handlers.length==0)c._handlers=null}},a._find=function(c){var a=c[0],b=c[1],d=c[2],e=a._handlers;if(!e)return-1;var a=(a.document||a).parentWindow||window,f=[];if(c.length===3)for(c=e.length-1;c>=0;c--){var g=e[c],g=a._allHandlers[g];if(g.eventType==b&&g.handler==d)return f.push(c),f}else if(c.length===2){for(c=e.length-1;c>=0;c--)g=e[c],g=a._allHandlers[g],g.eventType==b&&f.push(c);if(f.length>0)return f}else if(c.length===1){for(c=e.length-1;c>=0;c--)f.push(c);if(f.length>0)return f}return-1},a._removeAllEvents=function(){for(var c in this._allHandlers){var a=this._allHandlers[c];a.element.detachEvent("on"+a.eventType,a.wrappedEvent);a.element._handlers=null;delete this._allHandlers[c]}},a._counter=0,a._uid=function(){return"h"+a._counter++}):document.addEventListener&&(i=function(c,a,b,d){if(h["on"+a])h["on"+a](c,a,b,d);else j(c,a,b)},j=function(c,a,b){var e=!1;c||d.out("targetModel undefined:"+a+b);if(!c._eventTypes)c._eventTypes={};c._eventTypes[a]||(c._eventTypes[a]=[]);c.addEventListener(a,b,!1);c=c._eventTypes[a];for(a=0;a<c.length;a++)if(c[a]==b){e=!0;break}e||c.push(b)},b=function(c,a,b){if(h["off"+a])h["off"+a](c,a,b);else arguments.length==3?e(c,a,b):e(c,a)},e=function(c,a,b){if(a)if(arguments.length==3){if(b&&(c.removeEventListener(a,b,!1),c._eventTypes&&c._eventTypes[a]))for(var d=c._eventTypes[a],e=0;e<d.length;e++)if(d[e]===b){d[e]=null;d.splice(e,1);break}}else{if(c._eventTypes&&c._eventTypes[a]){d=c._eventTypes[a];for(e=0;e<d.length;e++)c.removeEventListener(a,d[e],!1);c._eventTypes[a]=[]}}else if(c._eventTypes){var f=c._eventTypes,g;for(g in f){d=c._eventTypes[g];for(e=0;e<d.length;e++)c.removeEventListener(g,d[e],!1)}}});h={ondrag:function(c,b,e){var f,i,k=!1,h=function(b){if(d.browser.mobileSafari||b.button===0)d.browser.mobileSafari?(b.stopPropagation(),b=b.touches[0],f=b.pageX,i=b.pageY):(b.stopPropagation(),b.preventDefault(),f=b.clientX,i=b.clientY),k=!1,d.browser.mobileSafari?(a.addEventListener(document,"touchmove",j),a.addEventListener(c,"touchend",n)):a.addEventListener(document,"mousemove",j)},j=function(b){if(d.browser.mobileSafari||b.button===0){var l,g;b.stopPropagation();d.browser.mobileSafari?(g=b.changedTouches[0],l=g.pageX,g=g.pageY):(l=b.clientX,g=b.clientY);Math.abs(f-l)+Math.abs(i-g)>2&&(d.browser.mobileSafari?(a.removeEventListener(document,"touchmove",j),a.removeEventListener(c,"touchend",n)):a.removeEventListener(document,"mousemove",j),k||(e.call(c,b),k=!0))}},n=function(c){if(d.browser.mobileSafari||c.button===0)d.browser.mobileSafari?(a.removeEventListener(document,"touchmove",j),k&&(c.stopPropagation(),c.preventDefault())):a.removeEventListener(document,"mousemove",j)};d.browser.mobileSafari?a.addEventListener(c,"touchstart",h):(a.addEventListener(c,"mousedown",h),a.addEventListener(c,"mouseup",n));g.push({element:c,eventType:b,handler:e,actions:[h,n]})},offdrag:function(c,b,e){for(var f in g)if(g[f].handler==e&&g[f].element==c&&g[f].eventType==b){d.browser.mobileSafari?(a.removeEventListener(c,"touchstart",g[f].actions[0]),a.removeEventListener(c,"touchend",g[f].actions[1])):(a.removeEventListener(c,"mousedown",g[f].actions[0]),a.removeEventListener(c,"mouseup",g[f].actions[1]));g.splice(f,1);break}},oncustomclick:function(c,b,e,f){var i,k,h=!1,j=!1,n,f=f?f:{},p=f.longtouchable,o=-1,f=function(b){h=!1;if(d.browser.mobileSafari||b.button===0){var l;d.browser.mobileSafari?(l=b.changedTouches[0],i=l.pageX,k=l.pageY):(i=b.clientX,k=b.clientY);j=!1;p&&(n=setTimeout(function(){!h&&!j&&(d.browser.mobileSafari?(a.removeEventListener(c,"touchmove",r),a.removeOriginalEventListener(c,"touchend",x)):(a.removeEventListener(c,"mousemove",r),a.removeOriginalEventListener(c,"click",x)),e.call(c,b,2E3))},1E3));d.browser.mobileSafari?(a.addEventListener(c,"touchmove",r),a.addOriginalEventListener(c,"touchend",x)):(a.addEventListener(c,"mousemove",r),a.addOriginalEventListener(c,"click",x))}},z=function(c){o=c.button;if(d.browser.mobileSafari||c.button===0)d.browser.mobileSafari&&(touch=c.changedTouches[0])},r=function(b){if(d.browser.mobileSafari){touch=b.changedTouches[0];var l=touch.pageX,b=touch.pageY}else l=b.clientX,b=b.clientY;if(h=Math.abs(i-l)+Math.abs(k-b)>1)clearTimeout(n),n=null,d.browser.mobileSafari?(a.removeEventListener(c,"touchmove",r),a.removeOriginalEventListener(c,"touchend",x)):(a.removeEventListener(c,"mousemove",r),a.removeOriginalEventListener(c,"click",x))},x=function(a){clearTimeout(n);n=null;j=!0;if(d.browser.mobileSafari||o===0){var b;if(d.browser.mobileSafari){b=a.changedTouches[0];var l=b.pageX;b=b.pageY}else l=a.clientX,b=a.clientY;Math.abs(i-l)+Math.abs(k-b)<1&&(h=!1,e.call(c,a,0))}};d.browser.mobileSafari?a.addEventListener(c,"touchstart",f):(a.addEventListener(c,"mousedown",f),a.addEventListener(c,"mouseup",z));g.push({element:c,eventType:b,handler:e,actions:[f,r,z,x]})},offcustomclick:function(c,b,e){for(var f in g)if(g[f].handler==e&&g[f].element==c&&g[f].eventType==b){d.browser.mobileSafari?(a.removeEventListener(c,"touchstart",g[f].actions[0]),a.removeEventListener(c,"touchmove",g[f].actions[1]),a.removeOriginalEventListener(c,"touchend",g[f].actions[3])):(a.removeEventListener(c,"mousedown",g[f].actions[0]),a.removeEventListener(c,"mousemove",g[f].actions[1]),a.removeEventListener(c,"mouseup",g[f].actions[2]),a.removeOriginalEventListener(c,"click",g[f].actions[3]));g.splice(f,1);break}},oncontextmenu:function(c,b,e){if(d.browser.ie==9){var f=function(a){a=p(a,c);e.call(c,a)};c.attachEvent("oncontextmenu",f);g.push({element:c,eventType:b,handler:e,actions:[f]})}else a.addOriginalEventListener(c,b,e)},offcontextmenu:function(c,b,e){if(d.browser.ie==9)for(var f in g){if(g[f].handler==e&&g[f].element==c&&g[f].eventType==b){c.detachEvent("oncontextmenu",g[f].actions[0]);g.splice(f,1);break}}else a.removeOriginalEventListener(c,b,e)},onmousewheel:function(c,b,e){if(d.browser.firefox){var f=function(a){a=p(a,c);e.call(c,a)};a.addOriginalEventListener(c,"DOMMouseScroll",f);g.push({element:c,eventType:b,handler:e,actions:[f]})}else a.addOriginalEventListener(c,"mousewheel",e)},offmousewheel:function(c,b,e){if(d.browser.firefox)for(var f in g){if(g[f].handler==e&&g[f].element==c&&g[f].eventType==b){a.removeOriginalEventListener(c,"DOMMouseScroll",g[f].actions[0]);g.splice(f,1);break}}else a.removeOriginalEventListener(c,"mousewheel",e)},onmouseenter:function(c,b,d){var e=function(c){var a=c.relatedTarget;if(a)if(this.compareDocumentPosition){var b=this.compareDocumentPosition(a);a==this||b==20||b==0||d.call(this,c)}else a==this||this.contains(a)||d.call(this,c);else d.call(this,c)};a.addEventListener(c,"mouseover",e);g.push({element:c,eventType:b,handler:d,actions:[e]})},offmouseenter:function(c,b,d){for(var e in g)if(g[e].handler==d&&g[e].element==c&&g[e].eventType==b){a.removeEventListener(c,"mouseover",g[e].actions[0]);g.splice(e,1);break}},onmouseleave:function(c,b,d){var e=function(c){var a=c.relatedTarget;a?this.compareDocumentPosition?(a=this.compareDocumentPosition(a),a==20||a==0||d.call(this,c)):this.contains(a)||d.call(this,c):d.call(this,c)};a.addEventListener(c,"mouseout",e);g.push({element:c,eventType:b,handler:d,actions:[e]})},offmouseleave:function(c,b,d){for(var e in g)if(g[e].handler==d&&g[e].element==c&&g[e].eventType==b){a.removeEventListener(c,"mouseout",g[e].actions[0]);g.splice(e,1);break}}};f=function(c){if(f.done)return c();f.timer?f.ready.push(c):(f.ready=[c],a.on(window,"load",n),f.timer=window.setInterval(n,300))};n=function(){if(f.done)return!0;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){f.done=!0;window.clearInterval(f.timer);f.timer=null;for(var c=0;c<f.ready.length;c++)f.ready[c]();f.ready=null;return!0}};k=function(){this.subscribers=[]};k.prototype.subscribe=function(c){d.array.some(this.subscribers,function(a){return a===c})||this.subscribers.push(c);return c};k.prototype.deliver=function(c){d.array.forEach(this.subscribers,function(a){a(c)})};k.prototype.unsubscribe=function(c){this.subscribers=d.array.filter(this.subscribers,function(a){return a!==c});return c};o=function(c,a,b){var e,f;if(b){a="on"+a;if(!c._$events)c._$events={};c._$events[a]?c._$events[a].length==0&&(c._$events[a]=[]):c._$events[a]=[];c=c._$events[a];a=c.length;e=-1;for(f=0;f<a;f++)if(c[f]==b){e=f;break}e===-1&&c.push(b)}else d.out(">>> \u6dfb\u52a0\u7684\u89c2\u5bdf\u8005\u65b9\u6cd5\u4e0d\u5b58\u5728\uff1a"+c+a+b)};a.addEventListener=i;a.removeEventListener=b;a.addOriginalEventListener=j;a.removeOriginalEventListener=e;a.on=a.addEventListener;a.off=a.removeEventListener;a.onDomReady=f;a.Publish=k;a.addObserver=o;a.addObservers=function(c){var a=c.targetModel,c=c.eventMapping,b;for(b in c)o(a,b,c[b])};a.notifyObservers=function(c,a,b){var d,a="on"+a,e=!0;if(c._$events&&c._$events[a]&&(a=c._$events[a],a.length>0))for(d=0;d<a.length;d++)a[d].apply(c,[b])===!1&&(e=!1);return e};a.removeObserver=function(c,a,b){var d,e=!1,f,g=c._$events;if(b){if(g&&(c=g["on"+a])){f=c.length;for(d=0;d<f;d++)if(c[d]==b){c[d]=null;c.splice(d,1);e=!0;break}}}else if(a){if(g&&(a="on"+a,c=g[a])){f=c.length;for(d=0;d<f;d++)c[d]=null;delete g[a];e=!0}}else if(c&&g){for(d in g)delete g[d];delete c._$events;e=!0}return e}});Jx().$package(function(d){d.date=d.date||{};d.date.format=function(a,d){var j={"M+":a.getMonth()+1,"D+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(Y+)/.test(d)&&(d=d.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var b in j)RegExp("("+b+")").test(d)&&(d=d.replace(RegExp.$1,RegExp.$1.length==1?j[b]:("00"+j[b]).substr((""+j[b]).length)));return d}});Jx().$package(function(d){var a=d.Class({init:function(){var a=this;this.op=[{".":function(a,b){return b.className==a},"+":function(a,b){return b.getAttribute(a)},"#":function(a,b){return b.id==a},".~":function(a,b){return $D.hasClass(b,a)}},{">":function(d,b){var e,h,g;g=d.split(">");h=g[0];g=g[1];return(g=="*"||a.match(g,b))&&(e=a.operate(a.detectAncestor,h,b)())?a.packEvent(b,e):!1}},{"!":function(d,b){d=d.substr(1);return!a.match(d,b)}},{"&&":function(d,b){var e,h;h=d.split("&&");e=h[0];h=h.slice(1).join("");return a.match(e,b)?h.indexOf("&&")==-1?a.match(h,b):arguments.callee(h,b):!1}}];this.op2Level=[[".","#","+",".~"],">","!","&&"]},detectAncestor:function(a,d,b){var e=5,h=d.target;return function(){if(b(a,h))return h;else if(e>0)return e--,h.parentNode?h=h.parentNode:e=0,arguments.callee();return null}},detect:function(a,d,b){var e=d.target;if(e.nodeType!=1){if(e=e.parentNode,b(a,e))return this.packEvent(d,e)}else return b(a,e);return!1},packEvent:function(a,d){return[!0,{target:d,oTarget:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()},pageX:a.pageX,pageY:a.pageY}]},operate:function(a,d,b){for(var e,h=3;h>0;){if(e=this.op[0][d.substr(0,h)]){var g=null;if(g=a(d.substr(h),b,e))return g}h--}return!1},match:function(a,d){for(var b=this.op2Level.length;b>0;b--){var e=this.op2Level[b];if(a.indexOf(e)!=-1)return this.op[b][e](a,d,void 0)}return this.operate(this.detect,a,d)},router:function(a,d,b){a=a.split(",");for(b=a.length-1;b>=0;b--)if(result=this.match(a[b],d))return result;return!1},parse:function(a,d,b){a=this.router(a,b);a.length==2?d(a[1]):a&&d(b)}});d.event.eventParser=new a});Jx().$package(function(d){var a=d.event,i={"#":"id",".":"className","@":"el","!":"!"},j={blur:1,focus:1,change:1};d.event.eventProxy=function(b,e){var h={},g,f;for(g in e){f=e[g];var n=g.split(" "),k=n[0],n=n[1];h[n]=h[n]||[];h[n].push([k,f])}g=f=null;for(g in h)if(f=h[g],j[g]||g.charAt(0)=="@")for(n=f.length-1;n>=0;n--)for(var k=f[n][0].split(","),o=k.length-1;o>=0;o--)if(type=i[k[o].charAt(0)],type=="id")a.on($D.id(k[o].substr(1)),g,f[n][1]);else{if(type=="el")a.on(b,g.substr(1),f[n][1])}else a.on(b,g,function(a){for(var c=f.length-1;c>=0;c--)d.event.eventParser.parse(f[c][0],f[c][1],a)})}});Jx().$package(function(d){d.number=d.number||{};d.number.format=function(a,d){for(var j=a?a.toString().split("."):["0"],b=d?d.split("."):[""],e="",h=j[0],g=b[0],f=h.length-1,n=!1,k=g.length-1;k>=0;k--)switch(g.substr(k,1)){case "":f>=0&&(e=h.substr(f--,1)+e);break;case "0":e=f>=0?h.substr(f--,1)+e:"0"+e;break;case ",":n=!0,e=","+e}if(f>=0)if(n)for(g=h.length;f>=0;f--)e=h.substr(f,1)+e,f>0&&(g-f)%3==0&&(e=","+e);else e=h.substr(0,f+1)+e;e+=".";h=j.length>1?j[1]:"";g=b.length>1?b[1]:"";for(k=f=0;k<g.length;k++)switch(g.substr(k,1)){case "":f<h.length&&(e+=h.substr(f++,1));break;case "0":e+=f<h.length?h.substr(f++,1):"0"}return e.replace(/^,+/,"").replace(/\.$/,"")}});Jx().$package(function(d){d.array=d.array||{};var a=d.array,i,j,b,e,h,g,f,n,k,o,p,c;i=Array.prototype.indexOf?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],c)}:function(c,a,b){for(b==null?b=0:b<0&&(b=Math.max(0,c.length+b));b<c.length;b++)if(c[b]===a)return b;return-1};j=Array.prototype.lastIndexOf?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],c)}:function(c,a,b){for(b==null?b=c.length-1:b<0&&(b=Math.max(0,c.length+b));b>=0;b--)if(c[b]===a)return b;return-1};b=Array.prototype.forEach?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],c)}:function(c,a,b){var d=c.length;if(typeof a!="function")throw new TypeError;for(var e=0;e<d;e++)e in c&&a.call(b,c[e],e,c)};e=Array.prototype.filter?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],c)}:function(c,a,b){var d=c.length;if(typeof a!="function")throw new TypeError;for(var e=[],f=0;f<d;f++)if(f in c){var g=c[f];a.call(b,g,f,c)&&e.push(g)}return e};h=Array.prototype.some?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],c)}:function(c,a,b){var d=c.length;if(typeof a!="function")throw new TypeError;for(var e=0;e<d;e++)if(e in c&&a.call(b,c[e],e,c))return!0;return!1};g=Array.prototype.map?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.map.apply(arguments[0],c)}:function(c,a,b){var d=c.length;if(typeof a!="function")throw new TypeError;for(var e=Array(d),f=0;f<d;f++)f in c&&(e[f]=a.call(b,c[f],f,c));return e};f=Array.prototype.every?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],c)}:function(c,a,b){var d=c.length;if(typeof a!="function")throw new TypeError;for(var e=0;e<d;e++)if(e in c&&!a.call(b,c[e],e,c))return!1;return!0};n=Array.prototype.reduce?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],c)}:function(c,a){var b=c.length>>>0;if(typeof a!="function")throw new TypeError;if(b==0&&arguments.length==2)throw new TypeError;var d=0;if(arguments.length>=3)var e=arguments[2];else{do{if(d in c){e=c[d++];break}if(++d>=b)throw new TypeError;}while(1)}for(;d<b;d++)d in c&&(e=a.call(null,e,c[d],d,c));return e};k=Array.prototype.reduceRight?function(){var c=Array.prototype.slice.call(arguments,1);return Array.prototype.reduceRight.apply(arguments[0],c)}:function(c,a){var b=c.length>>>0;if(typeof a!="function")throw new TypeError;if(b==0&&arguments.length==2)throw new TypeError;b-=1;if(arguments.length>=3)var d=arguments[2];else{do{if(b in c){d=c[b--];break}if(--b<0)throw new TypeError;}while(1)}for(;b>=0;b--)b in c&&(d=a.call(null,d,c[b],b,c));return d};o=function(c){var a=d.$typeof(c);return a?a!="array"&&a!="arguments"?[c]:c:[]};p=function(c,a){return i(c,a)>-1};c=function(c){for(var a=[],b=0,d=c.length;b<d;b++)p(a,c[b])||a.push(c[b]);return a};a.indexOf=i;a.lastIndexOf=j;a.forEach=b;a.filter=e;a.some=h;a.map=g;a.every=f;a.reduce=n;a.reduceRight=k;a.toArray=o;a.remove=function(c,a){var a=o(a),b,d,e=!1;for(b=0;b<a.length;b++)for(d=0;d<c.length;d++)c[d]===a[b]&&(c.splice(d,1),e=!0);return e};a.replace=function(c,a,b){for(;0<c.length;ij++)if(c[0]===a)return c[0]=b,!0;return!1};a.bubbleSort=function(c,a){for(var a=a||function(c,a){return c-a},b=c.length,d,e,f=0;f<b-1;f++){e=!1;for(var g=b-1;g>f;g--)a(c[g],c[g-1])<0&&(e=!0,d=c[g-1],c[g-1]=c[g],c[g]=d);if(!e)break}return c};a.binarySearch=function(c,a,b){for(var d=0,e=c.length,f=Math.floor(c.length/2);e!=f;)b(a,c[f])>0?d=f+1:e=f,f=Math.floor((d+e)/2);return f};a.contains=p;a.uniquelize=c;a.intersect=function(c,a){for(var b=[],d=0,e=c.length;d<e;d++)p(a,c[d])&&b.push(c[d]);return b};a.minus=function(c,a){for(var b=[],d=0,e=c.length;d<e;d++)p(a,c[d])||b.push(c[d]);return b};a.union=function(a,b){return c(a.concat(b))}});Jx().$package(function(d){d.string=d.string||{};var a=d.string,i,j,b,e,h,g,f,n,k,o,p={};i=function(c,a){var b=!/\W/.test(c)?p[c]=p[c]||i(document.getElementById(c).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+c.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return a?b(a):b};j=function(c){return j.RE.test(c)};j.RE=/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i;b=function(c){var a=null;if(null!==(a=b.RE.exec(c))){for(var c={},d=0,e=b.SPEC.length;d<e;d++)c[b.SPEC[d]]=a[d+1];a=c}return a};b.SPEC=["scheme","user","pass","host","port","path","query","fragment"];b.RE=/^([^:]+):\/\/(?:([^:@]+):?([^@]*)@)?(?:([^/?#:]+):?(\d*))([^?#]*)(?:\?([^#]+))?(?:#(.+))?$/;e=function(c){return String(c).replace(/^\s+|\s+$/g,"")};h=function(c,a){return encodeURIComponent(String(c))+"="+encodeURIComponent(String(a))};g=function(c,a){return c.replace(/[^\x00-\xff]/g,{2:"aa",3:"aaa"}[a||2]).length};f=function(c,a){return c.substring(0,c.length-a)};n=function(c){return c.replace(/[&'"<>\/\\\-\x00-\x09\x0b-\x0c\x1f\x80-\xff]/g,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")};k=function(c){return escape(c).replace(/\+/g,"%2B")};o=function(c,a){var b=document.createElement("div");b.style.visibility="hidden";b.style.width="auto";if(a)b.style.fontSize=a+"px";b.style.position="absolute";b.innerHTML=d.string.encodeHtmlSimple(c);document.body.appendChild(b);var e=b.offsetWidth;document.body.removeChild(b);return e};a.cutByWidth=function(c,a,b){for(var d=c.length;d>=0;--d)if(c=c.substring(0,d),o(c,a)<b)return c;return""};a.toString=function(c){return c+""};a.template=i;a.isURL=j;a.parseURL=b;a.buildURL=function(c){for(var a="",d={},e={},f=0,g=b.SPEC.length;f<g;f++){var k=b.SPEC[f];if(c[k]){switch(k){case "scheme":e[k]="://";break;case "pass":d[k]=":";case "user":d.host="@";break;case "port":d[k]=":";break;case "query":d[k]="?";break;case "fragment":d[k]="#"}k in d&&(a+=d[k]);k in c&&(a+=c[k]);k in e&&(a+=e[k])}}return a};a.mapQuery=function(c){var a,b,c=c||window.location.href,d=c.indexOf("?"),e=c.substring(d+1).split("&"),f={};if(d===-1)return f;for(c=0;c<e.length;c++)try{if(d=e[c].indexOf("="),a=e[c].substring(0,d),b=e[c].substring(d+1),!(f[a]=unescape(b)))throw Error("uri has wrong query string when run mapQuery.");}catch(g){}return f};a.test=function(c,a,b){return(typeof a=="string"?RegExp(a,b):a).test(c)};a.contains=function(c,a,b){return b?(b+c+b).indexOf(b+a+b)>-1:c.indexOf(a)>-1};a.trim=e;a.clean=function(c){return e(c.replace(/\s+/g," "))};a.camelCase=function(c){return c.replace(/-\D/g,function(c){return c.charAt(1).toUpperCase()})};a.hyphenate=function(c){return c.replace(/[A-Z]/g,function(c){return"-"+c.charAt(0).toLowerCase()})};a.capitalize=function(c){return c.replace(/\b[a-z]/g,function(c){return c.toUpperCase()})};a.escapeRegExp=function(c){return c.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")};a.toInt=function(c,a){return parseInt(c,a||10)};a.toFloat=function(c){return parseFloat(c)};a.toSingleLine=function(c){return String(c).replace(/\r/gi,"").replace(/\n/gi,"")};a.toHtml=function(c){return String(c).replace(/&/gi,"&amp;").replace(/\\/gi,"&#92;").replace(/\'/gi,"&#39;").replace(/\"/gi,"&quot;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/ /gi,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n\r/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")};a.toTitle=function(c){return String(c).replace(/\\/gi,"\\").replace(/\'/gi,"'").replace(/\"/gi,"'")};a.toQueryPair=h;a.toQueryString=function(c){var a=[],b;for(b in c)a.push(h(b,c[b]));return a.join("&")};a.hexToRgb=function(c,a){var b=c.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return b?b.slice(1).hexToRgb(a):null};a.rgbToHex=function(c,a){var b=c.match(/\d{1,3}/g);return b?b.rgbToHex(a):null};a.stripScripts=function(c,a){var b="",d=c.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(c,a){b+=a+"\n";return""});a===!0?$exec(b):$type(a)=="function"&&a(b,d);return d};a.substitute=function(c,a,b){return c.replace(b||/\\?\{([^{}]+)\}/g,function(c,b){return c.charAt(0)=="\\"?c.slice(1):a[b]!=void 0?a[b]:""})};a.replaceAll=function(c,a,b,d){return RegExp.prototype.isPrototypeOf(a)?c.replace(a,b):c.replace(RegExp(a,d?"gi":"g"),b)};a.byteLength=g;a.cutRight=f;a.isNumber=function(c){return c.search(/^\d+$/)!==-1?!0:!1};a.isEmail=function(c){return c.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!==-1?!0:!1};a.cutByBytes=function(c,a){for(var b=c;g(b)>a;)b=f(b,1);return b};a.encodeHtmlSimple=function(c){c=c.replace(/&/g,"&amp;");c=c.replace(/>/g,"&gt;");c=c.replace(/</g,"&lt;");c=c.replace(/"/g,"&quot;");return c=c.replace(/'/g,"&#39;")};a.decodeHtmlSimple=function(c){c=c.replace(/&amp;/g,"&");c=c.replace(/&gt;/g,">");c=c.replace(/&lt;/g,"<");c=c.replace(/&quot;/g,'"');return c=c.replace(/&#39;/g,"'")};a.decodeHtmlSimple2=function(c){c=c.replace(/&amp;/g,"&");c=c.replace(/&gt;/g,">");c=c.replace(/&lt;/g,"<");c=c.replace(/\\\\"/g,'"');return c=c.replace(/\\\\'/g,"'")};a.encodeHtmlAttributeSimple=function(c){c=c.replace(/&/g,"&amp;");c=c.replace(/>/g,"&gt;");c=c.replace(/</g,"&lt;");c=c.replace(/"/g,"&quot;");c=c.replace(/'/g,"&#39;");c=c.replace(/=/g,"&#61;");return c=c.replace(/`/g,"&#96;")};a.encodeHtmlAttribute=function(c){return c.replace(/[&'"<>\/\\\-\x00-\x1f\x80-\xff]/g,function(c){return"&#"+c.charCodeAt(0)+";"})};a.encodeHtml=n;a.encodeScript=function(c){c+="";return c.replace(/[\\"']/g,function(c){return"\\"+c}).replace(/%/g,"\\x25").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\x01/g,"\\x01")};a.encodeHrefScript=function(c){return n(k(escScript(c)))};a.encodeRegExp=function(c){return c.replace(/[\\\^\$\*\+\?\{\}\.\(\)\[\]]/g,function(c){return"\\"+c})};a.encodeUrl=k;a.encodeUriComponent=function(c){c=encodeURIComponent(c);c=c.replace(/~/g,"%7E");c=c.replace(/!/g,"%21");c=c.replace(/\*/g,"%2A");c=c.replace(/\(/g,"%28");c=c.replace(/\)/g,"%29");c=c.replace(/'/g,"%27");c=c.replace(/\?/g,"%3F");return c=c.replace(/;/g,"%3B")};a.vaildTencentUrl=function(c){return/^(https?:\/\/)?[\w\-.]+\.(qq|paipai|soso|taotao)\.com($|\/|\\)/i.test(c)||/^[\w][\w\/\.\-_%]+$/i.test(c)||/^[\/\\][^\/\\]/i.test(c)?!0:!1};a.vaildUrl=function(c){var c=encodeURI(c).replace(/(^\s*)|(\s*$)/g,""),a=/(^[a-zA-Z0-9]+[^.]):/,b=/^[\S.]+\.[\S.]+$/,d=/[\w.]+\/(\S*)/,e=/^[\s*]*javascript[\s*]*:/;!a.test(c)&&!b.test(c)?c="":(a.test(c)||(c="http://"+c),d.test(c)||(c+="/"),e.test(c)&&(c=""));return c};a.getCharWidth=o});Jx().$package(function(d){var a=d.dom.id,i=d.dom,j=d.event,b;if(typeof window.XMLHttpRequest==="undefined")window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")};d.http=d.http||{};b=function(e,f,h){var k,o,p,c,l=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,q,v=!1,s=!1,h=h||{};p=h.isDefer||!1;o=h.query||null;arguments=h.arguments||null;var m=h.onSuccess||function(){},A=h.onError||function(){},u=h.onComplete||function(){},w,y=h.onTimeout||function(){},B=h.timeout,z=h.charset?h.charset:"utf-8",r=h.win||window,x,f=f||"";o!==null&&(f=f+"?"+o);c=b.Id++;w=function(c){(c=a("jet_load_"+c))&&l.removeChild(c)};o=function(a,b,d){return i.node("link",{id:"jet_load_"+c,type:"text/css",charset:d||"utf-8",rel:"stylesheet",href:a},b)};e==="script"?k=h.node||function(a,b,d,e){a=i.node("script",{id:"jet_load_"+c,type:"text/javascript",charset:d||"utf-8",src:a},b);e&&a.setAttribute("defer","defer");return a}(f,r,z,p):e==="css"&&(k=h.node||o(f,r,z));if(d.browser.engine.trident&&parseInt(d.browser.ie)<9)k.onreadystatechange=function(){var a=this.readyState;if(a==="loaded"||a==="complete")if(k.onreadystatechange=null,!v)s=!0,window.clearTimeout(q),q=null,x={},x.id=c,x.uri=f,x.arguments=arguments,m(x),u(x)};else if(d.browser.engine.webkit)j.on(k,"load",function(){var a;if(!v)s=!0,window.clearTimeout(q),q=null,a={},a.id=c,a.uri=f,a.arguments=arguments,m(a),u(a),e==="script"&&w(c)});else k.onload=function(){var a;if(!v)s=!0,window.clearTimeout(q),q=null,a={},a.id=c,a.uri=f,a.arguments=h.arguments,m(a),u(a),e==="script"&&w(c)},k.onerror=function(a){var b;if(!v)s=!0,window.clearTimeout(q),q=null,b={},b.id=c,b.uri=f,b.arguments=arguments,b.error=a,A(b),u(b),w(c)};if(h.node)if(e==="script")k.src=f;else{if(e==="css")k.href=f}else l.appendChild(k);e==="script"&&B&&(q=window.setTimeout(function(){var a;if(!s)v=!0,a={},a.uri=f,a.arguments=arguments,y(a),u(a),w(c)},B));p=function(c){this._node=c;this._head=l};p.prototype={abort:function(){this._node.src="";this._head.removeChild(this._node);delete this._node}};return new p(k)};b.Id=0;var e,h={_iframes:[],_tick:0,_select:function(){this._tick++;return this._iframes[(this._tick-1)%this._len]},init:function(a){if(this._isInit!=!0){this._len=a;for(var b=document.body,d=0;d<a;d++)e=i.node("div",{"class":"RPCService_hDiv"}),i.hide(e),e.innerHTML='<iframe id="RPCService_hIframe_'+d+'" name="RPCService_hIframe_'+d+'" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>',b.appendChild(e),this._iframes[d]=[e,null,"RPCService_hIframe_"+d];this._isInit=!0}},take:function(a){var b=this._select();b[1]&&b[0].removeChild(b[1]);a.setAttribute("target",b[2]);b[1]=a;b[0].appendChild(a)}};d.http.ajax=function(a,b){var d,e,h,i=!1,c=!1,b={method:b.method||"GET",data:b.data||null,arguments:b.arguments||null,onSuccess:b.onSuccess||function(){},onError:b.onError||function(){},onComplete:b.onComplete||function(){},onTimeout:b.onTimeout||function(){},isAsync:b.isAsync||!0,timeout:b.timeout?b.timeout:3E4,contentType:b.contentType?b.contentType:"utf-8",type:b.type||"xml"},a=a||"";h=b.timeout;d=new window.XMLHttpRequest;d.open(b.method,a,b.isAsync);d.setRequestHeader("Content-Type",b.contentType);e=function(c){try{return!c.status&&location.protocol=="file:"||c.status>=200&&c.status<300||c.status==304||navigator.userAgent.indexOf("Safari")>-1&&typeof c.status=="undefined"}catch(a){}return!1};d.onreadystatechange=function(){if(d.readyState==4){if(!i){var h={};h.responseText=d.responseText;h.responseXML=d.responseXML;h.data=b.data;h.status=d.status;h.uri=a;h.arguments=b.arguments;if(e(d))b.type==="script"&&eval.call(window,data),b.onSuccess(h);else b.onError(h);b.onComplete(h)}c=!0;d=null}};d.send(b.data);window.setTimeout(function(){var d;if(!c)i=!0,d={},d.uri=a,d.arguments=b.arguments,b.onTimeout(d),b.onComplete(d)},h);return d};d.http.comet=function(a,b){var a=a||"",b={method:b.method||"GET",data:b.data||null,arguments:b.arguments||null,callback:b.callback||function(){},onLoad:b.onLoad||function(){},contentType:b.contentType?b.contentType:"utf-8"},e;if(d.browser.ie){e=new ActiveXObject("htmlfile");e.open();e.close();var h=e.createElement("div");e.appendChild(h);e.parentWindow._parent=self;h.innerHTML='<iframe id="_cometIframe" src="'+a+"?callback=window.parent._parent."+b.callback+'"></iframe>';e=e.getElementById("_cometIframe")}else e=i.node("iframe"),e.setAttribute("id","_cometIframe"),e.setAttribute("src",a+"?callback=window.parent._parent."+b.callback),e.style.position="absolute",e.style.visibility="hidden",e.style.left=e.style.top="-999px",e.style.width=e.style.height="1px",document.body.appendChild(e),self._parent=self;j.on(e,"load",b.onLoad);return e};d.http.load=b;d.http.loadCss=function(a,d){return b("css",a,d)};d.http.loadScript=function(a,d){return b("script",a,d)};d.http.formSend=function(a,b){h.init(2);var d={method:b.method||"GET",enctype:b.enctype||"",data:b.data||{},onSuccess:b.onSuccess||function(){},onError:b.onError||function(){},onComplete:b.onComplete||function(){},onTimeout:b.onTimeout||function(){},timeout:b.timeout?b.timeout:1E4},e=i.node("form",{"class":"RPCService_form",method:d.method,action:a+"?t="+(new Date).getTime(),enctype:d.enctype});if(Object.prototype.toString.call(d.data).indexOf("String")>-1){var j=i.node("input");j.type="text";j.name=d.data;e.appendChild(j)}else for(var p in d.data)j=i.node("input"),j.type="text",j.name=p,j.setAttribute("value",d.data[p]),e.appendChild(j);h.take(e);e.submit()}});Jx().$package(function(d){var a=window.location.host;d.cookie={set:function(d,j,b,e,h){if(h){var g=new Date;g.setTime((new Date).getTime()+36E5*h)}window.document.cookie=d+"="+j+"; "+(h?"expires="+g.toGMTString()+"; ":"")+(e?"path="+e+"; ":"path=/; ")+(b?"domain="+b+";":"domain="+a+";");return!0},get:function(a){a=window.document.cookie.match(RegExp("(?:^|;+|\\s+)"+a+"=([^;]*)"));return!a?"":a[1]},remove:function(d,j,b){window.document.cookie=d+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(b?"path="+b+"; ":"path=/; ")+(j?"domain="+j+";":"domain="+a+";")}}});Jx().$package(function(d){d.localStorage={setItem:function(a,d){this.isSupports()&&window.localStorage.setItem(a,d)},getItem:function(a){return this.isSupports()?window.localStorage.getItem(a):null},removeItem:function(a){this.isSupports()&&window.localStorage.removeItem(a)},clear:function(){this.isSupports()&&window.localStorage.clear()},isSupports:function(){return"localStorage"in window&&window.localStorage!==null}}});Jx().$package(function(d){var a=function(){function a(o,p){p=p||document;if(!/^[\w\-_#]+$/.test(o)&&p.querySelectorAll)return d(p.querySelectorAll(o));if(o.indexOf(",")>-1){for(var c=o.split(/,/g),l=[],q=0,v=c.length;q<v;++q)l=l.concat(a(c[q],p));return k(l)}c=o.match(e);q=c.pop();l=(q.match(g)||n)[1];v=!l&&(q.match(h)||n)[1];q=!l&&(q.match(f)||n)[1];if(v&&!q&&p.getElementsByClassName)q=d(p.getElementsByClassName(v));else{q=!l&&d(p.getElementsByTagName(q||"*"));if(v){for(var v=RegExp("(^|\\s)"+v+"(\\s|$)"),s=-1,m,A=-1,u=[];m=q[++s];)v.test(m.className)&&(u[++A]=m);q=u}if(l)return(c=p.getElementById(l))?[c]:[]}return c[0]&&q[0]?b(c,q):q}function d(a){try{return Array.prototype.slice.call(a)}catch(b){for(var c=[],e=0,f=a.length;e<f;++e)c[e]=a[e];return c}}function b(a,d,c){var e=a.pop();if(e===">")return b(a,d,!0);for(var k=[],i=-1,j=(e.match(g)||n)[1],m=!j&&(e.match(h)||n)[1],e=!j&&(e.match(f)||n)[1],A=-1,u,w,y,e=e&&e.toLowerCase();u=d[++A];){w=u.parentNode;do if(y=(y=(y=!e||e==="*"||e===w.nodeName.toLowerCase())&&(!j||w.id===j))&&(!m||RegExp("(^|\\s)"+m+"(\\s|$)").test(w.className)),c||y)break;while(w=w.parentNode);y&&(k[++i]=u)}return a[0]&&k[0]?b(a,k):k}var e=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/ig,h=/^(?:[\w\-_]+)?\.([\w\-_]+)/,g=/^(?:[\w\-_]+)?#([\w\-_]+)/,f=/^([\w\*\-_]+)/,n=[null,null],k=function(){var a=+new Date,b=function(){var c=1;return function(b){var d=b[a],e=c++;return!d?(b[a]=e,!0):!1}}();return function(c){for(var d=c.length,e=[],f=-1,g=0,h;g<d;++g)h=c[g],b(h)&&(e[++f]=h);a+=1;return e}}();return a}();d.dom.mini=a});Jx().$package(function(d){var a={};(function(){function d(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=f[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function j(a,b){var e,c,f,q,v=h,s,m=b[a];m&&typeof m==="object"&&typeof m.toJSON==="function"&&(m=m.toJSON(a));typeof n==="function"&&(m=n.call(b,a,m));switch(typeof m){case "string":return d(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);case "object":if(!m)return"null";h+=g;s=[];if(Object.prototype.toString.apply(m)==="[object Array]"){q=m.length;for(e=0;e<q;e+=1)s[e]=j(e,m)||"null";f=s.length===0?"[]":h?"[\n"+h+s.join(",\n"+h)+"\n"+v+"]":"["+s.join(",")+"]";h=v;return f}if(n&&typeof n==="object"){q=n.length;for(e=0;e<q;e+=1)c=n[e],typeof c==="string"&&(f=j(c,m))&&s.push(d(c)+(h?": ":":")+f)}else for(c in m)Object.hasOwnProperty.call(m,c)&&(f=j(c,m))&&s.push(d(c)+(h?": ":":")+f);f=s.length===0?"{}":h?"{\n"+h+s.join(",\n"+h)+"\n"+v+"}":"{"+s.join(",")+"}";h=v;return f}}var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,g,f={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof a.stringify!=="function")a.stringify=function(a,b,d){var c;g=h="";if(typeof d==="number")for(c=0;c<d;c+=1)g+=" ";else typeof d==="string"&&(g=d);if((n=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return j("",{"":a})};if(typeof a.parse!=="function")a.parse=function(a,d){function e(c,a){var b,f,g=c[a];if(g&&typeof g==="object")for(b in g)Object.hasOwnProperty.call(g,b)&&(f=e(g,b),f!==void 0?g[b]=f:delete g[b]);return d.call(c,a,g)}var c;b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return c=eval("("+a+")"),typeof d==="function"?e({"":c},""):c;throw new SyntaxError("JSON.parse");}})();d.json=a});Jx().$package(function(d){d.fx=d.fx||{}});Jx().$package(function(d){var a=d.dom,i=d.event,j=new d.Class({init:function(c,a){a=d.array.toArray(a);return d.extend(c,{easeIn:function(b){return c(b,a)},easeOut:function(b){return 1-c(1-b,a)},easeInOut:function(b){return b<=0.5?c(2*b,a)/2:(2-c(2*(1-b),a))/2}})}}),b={linear:function(c){return c},extend:function(c){for(var a in c)this[a]=new j(c[a])}};b.extend({pow:function(c,a){return Math.pow(c,a&&a[0]||6)},exponential:function(c){return Math.pow(2,8*(c-1))},circular:function(c){return 1-Math.sin(Math.acos(c))},sinusoidal:function(c){return 1-Math.sin((1-c)*Math.PI/2)},back:function(c,a){a=a&&a[0]||1.618;return Math.pow(c,2)*((a+1)*c-a)},bounce:function(c){for(var a,b=0,d=1;;b+=d,d/=2)if(c>=(7-4*b)/11){a=d*d-Math.pow((11-6*b-11*c)/4,2);break}return a},elastic:function(c,a){return Math.pow(2,10*--c)*Math.cos(20*c*Math.PI*(a&&a[0]||1)/3)}});d.array.forEach(["quadratic","cubic","quartic","quintic"],function(c,a){b[c]=new j(function(c){return Math.pow(c,[a+2])})});var e=new d.Class({init:function(c){this.setOption(c)},setOption:function(c){this.option=d.extend({duration:500,loop:1,fps:1E3/(c&&c.duration||500)},c)},start:function(){if(!this.check())return this;var c=this.option;this.time=0;this.loop=c.loop;this.onStart.apply(this,arguments);this.startTimer();return this},pause:function(){this.stopTimer();return this},resume:function(){this.startTimer();return this},end:function(){this.stopTimer()&&this.onEnd.apply(this,arguments);return this},cancel:function(){this.stopTimer()&&this.onCancel.apply(this,arguments);return this},onStart:function(){i.notifyObservers(this,"start")},onEnd:function(){i.notifyObservers(this,"end")},onCancel:function(){i.notifyObservers(this,"cancel")},onLoop:function(){i.notifyObservers(this,"loop")},onBeater:function(){i.notifyObservers(this,"beater")},check:function(){return!this.timer?!0:!1},setDuration:function(c){this.option.duration=c||500},update:function(){var c=d.now(),a=this.option;if(c<this.time+this.option.duration)this.onBeater((c-this.time)/a.duration);else this.onBeater(1),this.onLoop(),a.loop<=0||--this.loop?this.time=c:(this.stopTimer(),this.onEnd())},stopTimer:function(){if(!this.timer)return!1;this.time=d.now()-this.time;this.timer=n(this);return!0},startTimer:function(){if(this.timer)return!1;this.time=d.now()-this.time;this.timer=f(this);return!0}}),h={},g={},f=function(c){var a=c.option.fps,b=h[a]||(h[a]=[]);b.push(c);g[a]||(g[a]=setInterval(function(){for(var a=b.length;a--;)b[a]&&b[a].update()},Math.round(1E3/a)));return!0},n=function(a){var b=a.option.fps,e=h[b]||[];d.array.remove(e,a);!e.length&&g[b]&&(g[b]=clearInterval(g[b]));return!1},k=new d.Class({extend:e},{init:function(a){k.superClass.init.apply(this,arguments);this.option=this.option||{};a=d.extend(this.option,{element:null,property:"",from:0,to:1,unit:!1,transition:b.linear,fps:25,converter:o},a);this.from=a.from;this.to=a.to},getTransition:function(){return this.option.transition||b.sinusoidal.easeInOut},set:function(a){var b=this.option;this.render(b.element,b.property,a,b.unit);return this},setFromTo:function(a,b){this.from=a;this.to=b},render:function(c,b,d,e){a.setStyle(c,b,this.option.converter(d,e))},compute:function(a,b,d){return(b-a)*d+a},onStart:function(a,b){var e=this.option;this.from=d.isNumber(a)?a:e.from;this.to=d.isNumber(b)?b:e.to;i.notifyObservers(this,"start")},onEnd:function(){this.set(this.compute(this.from,this.to,this.option.transition(1)));i.notifyObservers(this,"end")},onCancel:function(){this.set(this.compute(this.from,this.to,this.option.transition(0)));i.notifyObservers(this,"cancel")},onBeater:function(a){this.set(this.compute(this.from,this.to,this.option.transition(a)))}}),o=function(a,b){return b?a+b:a},p=new d.Class({init:function(a){this.option=a=d.extend({element:null,property:"",from:0,to:0,unit:!1,duration:500,transition:b.linear,fps:25},a);this.from=a.from;this.to=a.to},getTransition:function(){return this.option.transition||b.sinusoidal.easeInOut},update:function(){var a=d.now(),b=this.option;a<this.time+this.option.duration?this.set(this.compute(this.from,this.to,b.transition((a-this.time)/b.duration))):(this.set(this.compute(this.from,this.to,1)),this.end())},set:function(a){var b=this.option;this.render(b.element,b.property,a,b.unit);return this},setDuration:function(a){this.option.duration=a||500},setFromTo:function(a,b){this.from=a;this.to=b},render:function(c,b,d,e){a.setStyle(c,b,e?d+e:d)},compute:function(a,b,d){return(b-a)*d+a},check:function(){return!this.timer?!0:!1},start:function(a,b){if(!this.check(a,b))return this;var e=this.option;this.from=d.isNumber(a)?a:e.from;this.to=d.isNumber(b)?b:e.to;this.time=0;this.startTimer();this.onStart();return this},end:function(){if(this.stopTimer())this.onEnd();return this},cancel:function(){if(this.stopTimer())this.onCancel();return this},onStart:function(){i.notifyObservers(this,"start")},onEnd:function(){i.notifyObservers(this,"end")},onCancel:function(){i.notifyObservers(this,"cancel")},pause:function(){this.stopTimer();return this},resume:function(){this.startTimer();return this},stopTimer:function(){if(!this.timer)return!1;this.time=d.now()-this.time;this.timer=n(this);return!0},startTimer:function(){if(this.timer)return!1;this.time=d.now()-this.time;this.timer=f(this);return!0}});d.fx.Beater=e;d.fx.Animation=k;d.fx.Animation2=p;d.fx.transitions=b});Jx().$package(function(d){d.ui=d.ui||{}});Jx().$package(function(d){var a=d.dom,i=d.event,j=function(a){a.preventDefault()},b=!1,e=!1,h=!1,g=!1,f,n,k,o,p,c,l;d.ui.Drag=new d.Class({init:function(q,v,s){var m=this,A,u,w,y;this.apperceiveEl=q;s=s||{};this.isLimited=s.isLimited||!1;this.dragType=s.dragType;this.isLocked=s.isLocked||!1;var B=!1;if(this.isLimited)this._leftMargin=s.leftMargin||0,this._topMargin=s.topMargin||0,this._rightMargin=s.rightMargin||0,this._bottomMargin=s.bottomMargin||0;if(s.xOnly)this._xOnly=s.xOnly||!1;if(s.yOnly)this._yOnly=s.yOnly||!1;this.effectEl=v===!1?!1:v||q;this.dragStart=function(a){if(a.changedTouches){if(a.changedTouches.length>1)return;a=a.changedTouches[0];document.body.style.WebkitTouchCallout="none"}else a.preventDefault(),a.stopPropagation();m.dragStartIn(a.pageX,a.pageY)};this.dragStartIn=function(q,v){if(!m.isLocked){i.notifyObservers(m,"beforeStart");b=s.clientEl?a.getClientWidth(s.clientEl):a.getClientWidth();e=s.clientEl?a.getClientHeight(s.clientEl):a.getClientHeight();h=m.effectEl?parseInt(a.getClientWidth(m.effectEl)):0;g=m.effectEl?parseInt(a.getClientHeight(m.effectEl)):0;if(m.isLimited)f=b-h-m._rightMargin,n=m._leftMargin,k=m._topMargin,o=e-g-m._bottomMargin;l||(l=new d.ui.MaskLayer({opacity:0}));l.setZIndex(9E6);l.show();m._oldX=A=m.effectEl?parseInt(a.getStyle(m.effectEl,"left"))||0:0;m._oldY=u=m.effectEl?parseInt(a.getStyle(m.effectEl,"top"))||0:0;w=q;y=v;if(d.browser.mobileSafari){i.on(document,"touchmove",m.dragMove);i.on(document,"touchend",m.dragStop);var x=new WebKitCSSMatrix(window.getComputedStyle(m.apperceiveEl).webkitTransform);p=q-x.m41;c=v-x.m42}else i.on(document,"mousemove",m.dragMove),i.on(document,"mouseup",m.dragStop);if(d.browser.ie)i.on(document.body,"selectstart",j);d.browser.mobileSafari?i.notifyObservers(m,"start",{x:q,y:v}):i.notifyObservers(m,"start",{x:A,y:u})}};this.dragMove=function(a){if(!m.isLocked){a.browserEvent?(a.browserEvent.preventDefault(),a.browserEvent.stopPropagation()):(a.preventDefault(),a.stopPropagation());a.changedTouches&&(a=a.changedTouches[0]);var b,e;d.browser.mobileSafari||(b=A+(a.pageX-w),e=u+(a.pageY-y));m.isLimited&&(b>f&&!s.isOverRight&&(b=f),b<n&&!s.isOverLeft&&(b=n));if(m._oldX!==b&&!m._yOnly){m._oldX=b;if(m.effectEl&&!d.browser.mobileSafari)m.effectEl.style.left=b+"px";B=!0}m.isLimited&&(e>o&&!s.isOverBottom&&(e=o),e<k&&!s.isOverTop&&(e=k));if(m._oldY!==e&&!m._xOnly){m._oldY=e;if(m.effectEl&&!d.browser.mobileSafari)m.effectEl.style.top=e+"px";B=!0}if(m.effectEl&&d.browser.mobileSafari)m._oldX=A+(a.pageX-w),m._oldY=u+(a.pageY-y),b=m._yOnly?A:a.pageX-p,e=m._xOnly?u:a.pageY-c,m.effectEl.style.webkitTransform="translate3d("+b+"px, "+e+"px, 0px)",b=a.pageX,e=a.pageY;B&&i.notifyObservers(m,"move",{x:b,y:e,orientEvent:a})}};this.dragStop=function(c){if(!m.isLocked){l.hide();document.body.style.WebkitTouchCallout="auto";if(B||d.browser.mobileSafari){var p=m._oldX,q=m._oldY;m.isLimited&&(p>f&&(p=f),p<n&&(p=n));m.isLimited&&(q>o&&(q=o),q<k&&(q=k));if(d.browser.mobileSafari){c.preventDefault();if(s.noEndCallback&&m.effectEl)m.effectEl.style.webkitTransform="none",a.setStyle(m.effectEl,"left",p+"px"),a.setStyle(m.effectEl,"top",q+"px");i.notifyObservers(m,"end",{x:p,y:q,orientEvent:c.changedTouches[0]})}else i.notifyObservers(m,"end",{x:p,y:q,orientEvent:c})}else i.notifyObservers(m,"end",{orientEvent:c});if(m.isLimited&&(m.isOverRight||m.isOverLeft||m.isOverTop||m.isOverBottom)){var p=A+(c.pageX-w),q=u+(c.pageY-y),c=m._leftMargin,v=e-m._bottomMargin,F=m._topMargin;(p>b-h-m._rightMargin||p<c||q>v||q<F)&&i.notifyObservers(m,"overFlowBorder",{x:p,y:q})}g=h=e=b=!1;d.browser.mobileSafari?(i.off(document,"touchmove",m.dragMove),i.off(document,"touchend",m.dragStop)):(i.off(document,"mousemove",m.dragMove),i.off(document,"mouseup",m.dragStop));d.browser.ie&&i.off(document.body,"selectstart",j);B=!1}};i.on(this.apperceiveEl,"drag",this.dragStart)},setEffect:function(a){this.effectEl=a},lock:function(){this.isLocked=!0;i.off(this.apperceiveEl,"drag",this.dragStart)},unlock:function(){this.isLocked=!1;i.on(this.apperceiveEl,"drag",this.dragStart)},show:function(){a.show(this.apperceiveEl)},hide:function(){a.hide(this.apperceiveEl)},setLimite:function(a){a=a||{};this.isLimited=a.isLimited||!0,this._leftMargin=a.leftMargin||0,this._topMargin=a.topMargin||0,this._rightMargin=a.rightMargin||0,this._bottomMargin=a.bottomMargin||0}})});Jx().$package(function(d){d.ui=d.ui||{};var a=d.dom,i=d.event,j=0,b={t:"t",r:"r",b:"b",l:"l",rt:"rt",rb:"rb",lb:"lb",lt:"lt"};d.ui.Resize=new d.Class({init:function(e,h,g){var f=this,g=g||{};this.apperceiveEl=e;this.effectEl=h===!1?!1:h||e;this.size=g.size||5;this.minWidth=g.minWidth||0;this.minHeight=g.minHeight||0;this._dragProxy=g.dragProxy;if(this.isLimited=g.isLimited||!1)this._leftMargin=g.leftMargin||0,this._topMargin=g.topMargin||0,this._rightMargin=g.rightMargin||0,this._bottomMargin=g.bottomMargin||0;this._left=this.getLeft();this._top=this.getTop();this._width=this.getWidth();this._height=this.getHeight();this.id=this.getId();e={t:"cursor:n-resize; z-index:1; left:0; top:-5px; width:100%; height:5px;",r:"cursor:e-resize; z-index:1; right:-5px; top:0; width:5px; height:100%;",b:"cursor:s-resize; z-index:1; left:0; bottom:-5px; width:100%; height:5px;",l:"cursor:w-resize; z-index:1; left:-5px; top:0; width:5px; height:100%;",rt:"cursor:ne-resize; z-index:2; right:-5px; top:-5px; width:5px; height:5px;",rb:"cursor:se-resize; z-index:2; right:-5px; bottom:-5px; width:5px; height:5px;",lt:"cursor:nw-resize; z-index:2; left:-5px; top:-5px; width:5px; height:5px;",lb:"cursor:sw-resize; z-index:2; left:-5px; bottom:-5px; width:5px; height:5px;"};this._onMousedown=function(){i.notifyObservers(f,"mousedown",{width:f._width,height:f._height})};this._onDragEnd=function(){i.notifyObservers(f,"end",{x:f.getLeft(),y:f.getTop(),width:f.getWidth(),height:f.getHeight()})};for(var j in b)h=a.node("div",{id:"window_"+this.id+"_resize_"+b[j]}),this.apperceiveEl.appendChild(h),a.setCssText(h,"position:absolute; overflow:hidden; background:url("+d.path+"assets/images/transparent.gif);"+e[j]),this["_dragController_"+b[j]]=new d.ui.Drag(h,!1);this._onDragLeftStart=function(){i.notifyObservers(f,"mousedown",{width:f._width,height:f._height});f._startLeft=f._left=f.getLeft();f._startWidth=f._width=f.getWidth();f._startHeight=f._height=f.getHeight()};this._onDragLeft=function(a){var b=f._startWidth-a.x,a=f._startLeft+a.x;if(b<f.minWidth)b=f.minWidth,a=f._startLeft+(f._startWidth-b);if(f.isLimited&&a-f._leftMargin<0)a=f._leftMargin,b=f._startLeft+f._startWidth-f._leftMargin;f.setLeft(a);f.setWidth(b);i.notifyObservers(f,"resize",{width:f._width,height:f._height})};this._onDragTopStart=function(){i.notifyObservers(f,"mousedown",{width:f._width,height:f._height});f._startTop=f._top=f.getTop();f._startHeight=f._height=f.getHeight()};this._onDragTop=function(a){var b=f._startHeight-a.y,a=f._startTop+a.y;if(b<f.minHeight)b=f.minHeight,a=f._startTop+(f._startHeight-b);if(f.isLimited&&a-f._topMargin<0)a=f._topMargin,b=f._startTop+f._startHeight-f._topMargin;f.setTop(a);f.setHeight(b);i.notifyObservers(f,"resize",{width:f._width,height:f._height})};this._onDragRightStart=function(){i.notifyObservers(f,"mousedown",{width:f._width,height:f._height});f._startWidth=f._width=f.getWidth();f._startLeft=f._left=f.getLeft();f._startHeight=f._height=f.getHeight();qqweb.layout.getClientWidth()};this._onDragRight=function(b){b=f._startWidth+b.x;if(b<f.minWidth)b=f.minWidth;var d=(a.getClientWidth()||0)-f._startLeft-f._rightMargin;f.isLimited&&d<b&&(b=d);f.setWidth(b);i.notifyObservers(f,"resize",{width:f._width,height:f._height})};this._onDragBottomStart=function(){i.notifyObservers(f,"mousedown",{width:f._width,height:f._height});f._startHeight=f._height=f.getHeight();f._startTop=f._top=f.getTop();a.getClientHeight()};this._onDragBottom=function(b){b=f._startHeight+b.y;if(b<f.minHeight)b=f.minHeight;var d=(a.getClientHeight()||0)-f._startTop-f._bottomMargin;f.isLimited&&d<b&&(b=d);f.setHeight(b);i.notifyObservers(f,"resize",{width:f._width,height:f._height})};this._onDragLeftTopStart=function(a){f._onDragLeftStart(a);f._onDragTopStart(a)};this._onDragLeftTop=function(a){f._onDragLeft(a);f._onDragTop(a)};this._onDragLeftBottomStart=function(a){f._onDragLeftStart(a);f._onDragBottomStart(a)};this._onDragLeftBottom=function(a){f._onDragLeft(a);f._onDragBottom(a)};this._onDragRightBottomStart=function(a){f._onDragRightStart(a);f._onDragBottomStart(a)};this._onDragRightBottom=function(a){f._onDragRight(a);f._onDragBottom(a)};this._onDragRightTopStart=function(a){f._onDragRightStart(a);f._onDragTopStart(a)};this._onDragRightTop=function(a){f._onDragRight(a);f._onDragTop(a)};i.addObserver(this["_dragController_"+b.t],"start",this._onDragTopStart);i.addObserver(this["_dragController_"+b.t],"move",this._onDragTop);i.addObserver(this["_dragController_"+b.t],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.r],"start",this._onDragRightStart);i.addObserver(this["_dragController_"+b.r],"move",this._onDragRight);i.addObserver(this["_dragController_"+b.r],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.b],"start",this._onDragBottomStart);i.addObserver(this["_dragController_"+b.b],"move",this._onDragBottom);i.addObserver(this["_dragController_"+b.b],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.l],"start",this._onDragLeftStart);i.addObserver(this["_dragController_"+b.l],"move",this._onDragLeft);i.addObserver(this["_dragController_"+b.l],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.rb],"start",this._onDragRightBottomStart);i.addObserver(this["_dragController_"+b.rb],"move",this._onDragRightBottom);i.addObserver(this["_dragController_"+b.rb],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.rt],"start",this._onDragRightTopStart);i.addObserver(this["_dragController_"+b.rt],"move",this._onDragRightTop);i.addObserver(this["_dragController_"+b.rt],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.lt],"start",this._onDragLeftTopStart);i.addObserver(this["_dragController_"+b.lt],"move",this._onDragLeftTop);i.addObserver(this["_dragController_"+b.lt],"end",this._onDragEnd);i.addObserver(this["_dragController_"+b.lb],"start",this._onDragLeftBottomStart);i.addObserver(this["_dragController_"+b.lb],"move",this._onDragLeftBottom);i.addObserver(this["_dragController_"+b.lb],"end",this._onDragEnd)},setWidth:function(b){a.setStyle(this.effectEl,"width",b+"px");this._width=b},setHeight:function(b){a.setStyle(this.effectEl,"height",b+"px");this._height=b},setLeft:function(b){a.setStyle(this.effectEl,"left",b+"px");this._left=b},setTop:function(b){a.setStyle(this.effectEl,"top",b+"px");this._top=b},getWidth:function(){return parseInt(a.getStyle(this.effectEl,"width"))},getHeight:function(){return parseInt(a.getStyle(this.effectEl,"height"))},getLeft:function(){return parseInt(a.getStyle(this.effectEl,"left"))},getTop:function(){return parseInt(a.getStyle(this.effectEl,"top"))},getId:function(){return j++},lock:function(){for(var a in b)this["_dragController_"+b[a]].lock()},unlock:function(){for(var a in b)this["_dragController_"+b[a]].unlock()},show:function(){for(var a in b)this["_dragController_"+b[a]].show()},hide:function(){for(var a in b)this["_dragController_"+b[a]].hide()},setLimite:function(a){a=a||{};this.isLimited=a.isLimited||!0,this._leftMargin=a.leftMargin||0,this._topMargin=a.topMargin||0,this._rightMargin=a.rightMargin||0,this._bottomMargin=a.bottomMargin||0},setMinLimite:function(a){a=a||{};this.minWidth=a.minWidth||0;this.minHeight=a.minHeight||0}})});Jx().$package(function(d){var a=d.dom,i=d.event;d.ui.Tab=function(a,b,d){this.tabs=[];this.currentTab=null;this.config={defaultIndex:0,triggerEvent:"click",slideEnabled:!1,slideInterval:5E3,slideDelay:300,autoInit:!0,onShow:function(){}};this.setConfig(d);a&&b&&(this.addRange(a,b),this.config.autoInit&&this.init())};d.ui.Tab.prototype={setConfig:function(a){if(a)for(var b in a)this.config[b]=a[b]},add:function(a){if(a&&a.trigger)this.tabs.push(a),a.trigger.style.display="block"},addRange:function(a,b){if(a&&b&&a.length&&b.length&&a.length==b.length)for(var d=0,h=a.length;d<h;d++)this.add({trigger:a[d],sheet:b[d]})},select:function(d){if(d&&!(this.currentTab&&d.trigger==this.currentTab.trigger)){if(this.currentTab&&(a.removeClass(this.currentTab.trigger,"current"),this.currentTab.sheet))this.currentTab.sheet.style.display="none";this.currentTab=d;this.show()}},remove:function(d){if(d){if(d.trigger)a.removeClass(d.trigger,"current"),d.trigger.style.display="none";if(d.sheet)d.sheet.style.display="none";var b=this.indexOf(d);this.tabs.splice(b,b);d.trigger==this.currentTab.trigger&&(b==0?this.select(this.tabs[b+1]):this.select(this.tabs[b-1]))}},show:function(){if(this.currentTab.trigger)this.currentTab.trigger.style.display="block";a.addClass(this.currentTab.trigger,"current");if(this.currentTab.sheet)this.currentTab.sheet.style.display="block";this.config.onShow.call(this);i.notifyObservers(this,"show",this.currentTab)},slide:function(){function a(){var b=g.indexOf(g.currentTab);b!=-1&&(f=window.setInterval(function(){var a=g.tabs[++b%g.tabs.length];a&&g.select(a)},h.slideInterval))}function b(){window.clearTimeout(n);window.clearInterval(f)}function e(){n=window.setTimeout(a,h.slideDelay)}var h=this.config,g=this,f,n;d.array.forEach(this.tabs,function(a){i.on(a.trigger,"mouseover",b);i.on(a.sheet,"mouseover",b);i.on(a.trigger,"mouseout",e);i.on(a.sheet,"mouseout",e)});a()},next:function(){var a=this.indexOf(this.currentTab);a!=-1&&(++a==this.tabs.length&&(a=0),(a=this.tabs[a])&&this.select(a))},prev:function(){var a=this.indexOf(this.currentTab);a!=-1&&(--a==-1&&(a=this.tabs.length-1),(a=this.tabs[a])&&this.select(a))},indexOf:function(a){for(var b=0,d=this.tabs.length;b<d;b++)if(a.trigger==this.tabs[b].trigger)return b;return-1},init:function(){var a=this.config,b=this;d.array.forEach(this.tabs,function(d){i.on(d.trigger,a.triggerEvent,function(){b.select.call(b,d)});if(d.sheet)d.sheet.style.display="none"});this.select(this.tabs[a.defaultIndex]);a.slideEnabled&&this.slide()}}});Jx().$package(function(d){var a=d.dom,i=d.event;d.ui.IframeScroller=function(j){this.container=j.parentNode;if(d.platform.iPad&&d.platform.iPad.split(".")[0]>=4)this.container=j.parentNode.parentNode;this.iframe=j;this.holding=!1;this.offsetY=this.offsetX=this.posy=this.posx=0;var b=this;this.observers={onTouchStart:function(d){d=d.changedTouches[0];b.posx=d.pageX;b.posy=d.pageY;b.minX=a.getWidth(b.container)-a.getWidth(b.iframe);b.minY=a.getHeight(b.container)-a.getHeight(b.iframe);i.on(b.iframe,"touchmove",b.observers.onTouchMove);i.on(b.iframe,"touchend",b.observers.onTouchEnd)},onTouchMove:function(a){if(!(a.changedTouches.length>1)){a.preventDefault();a.stopPropagation();var d=a.changedTouches[0],a=d.pageX,d=d.pageY,g=b.offsetX-(b.posx-a),f=b.offsetY-(b.posy-d);if(g>0)g=0;else if(g<b.minX)g=b.minX;if(f>0)f=0;else if(f<b.minY)f=b.minY;j.style.left=g+"px";j.style.top=f+"px";b.offsetX=g;b.offsetY=f;b.posx=a;b.posy=d}},onTouchEnd:function(){i.off(b.iframe,"touchmove",b.observers.onTouchMove);i.off(b.iframe,"touchend",b.observers.onTouchEnd)}};this.destroy=function(){i.off(this.iframe,"touchstart",this.observers.onTouchStart);i.off(this.iframe,"touchmove",this.observers.onTouchMove);i.off(this.iframe,"touchend",this.observers.onTouchEnd);this.container=this.iframe=null};i.on(this.iframe,"touchstart",this.observers.onTouchStart)}});Jx().$package(function(d){d.ui.Notifier=new d.Class({hasSupport:function(){return window.webkitNotifications?!0:!1},requestPermission:function(a){window.webkitNotifications.requestPermission(function(){a&&a(window.webkitNotifications.checkPermission()==0)})},notify:function(a,d,j){return window.webkitNotifications.checkPermission()==0?(a=window.webkitNotifications.createNotification(a,d,j),a.show(),a):!1}})});Jx().$package(function(d){var a=d.dom;d.ui.Marquee=new d.Class({init:function(a){var d=this;this.speed=a.speed||40;this.stopTime=a.stopTime||3E3;this.lineHeight=a.lineHeight||20;this.target=a.target;this.intervaler=this.lineTimer=this.timer=null;this.scrollHeight=this.lineHeight;this.isStop=!1;this._onTimeRun=function(){d.scrollOneLine()}},scrollOneLine:function(){if(this.scrollHeight>0){this.scrollHeight--;var a=this.target.style.top.match(/-?\d+/),a=!a?0:parseInt(a[0]);this.target.style.top=--a+"px";this.lineTimer=setTimeout(this._onTimeRun,this.speed)}else this.isStop||this.update()},stop:function(){this.timer&&clearTimeout(this.timer)},stopAll:function(){this.stop();this.lineTimer&&clearTimeout(this.lineTimer)},reset:function(){this.target.style.top="0px"},update:function(){if(!this.isStop){this.timer&&clearTimeout(this.timer);this.scrollHeight=this.lineHeight;var d=this.target.style.top.match(/\d+/),j=a.getScrollHeight(this.target);if(d&&j&&(d=parseInt(d[0]),d>=j)){this.target.style.top=this.lineHeight+"px";this.scrollOneLine();return}this.timer=setTimeout(this._onTimeRun,this.stopTime)}},walkOnLastLine:function(){this._onTimeRun()}})});Jx().$package(function(d){var a=d.dom,i=d.event,j=!1,b=!1;d.ui.Sortables=new d.Class({init:function(a,b,d){this.dropTargets=a.concat();this.sortStr=b;this.option=d||{};this.limiteOption=this.option.limiteOption||{};this.dragController={}},addDropTarget:function(a){this.dropTargets.push(a)},addEffect:function(a){this.effectEl=a},removeDropTarget:function(a){d.array.remove(this.dropTargets,a)},refreshDropTarget:function(b){var d,g,f,i=this.dropTargets;this.dropPos=[];if(b)for(k in i){if(dropTargetEl=i[k].el,b.el===dropTargetEl){d={};g=a.getXY(dropTargetEl);f=a.getClientWidth(dropTargetEl);b=a.getClientHeight(dropTargetEl);d.x=g[0];d.y=g[1];d.w=f;d.h=b;this.dropPos[k]=d;break}}else for(var k in i)b=i[k].el,d={},g=a.getXY(b),f=a.getClientWidth(b),b=a.getClientHeight(b),d.x=g[0],d.y=g[1],d.w=f,d.h=b,this.dropPos[k]=d},addDragClass:function(e){var h=e.parentNode,g=e,f=!1,n=this,k=null;a.getXY(h);var o=a.getXY(g),p=e.getAttribute(this.sortStr)||"",c=this.dropTargets,l,q;this.dropPos=[];this.dragController[p]=new d.ui.Drag(e,f,this.limiteOption);i.addObserver(this.dragController[p],"beforeStart",d.bind(function(){j=a.getClientWidth(g);b=a.getClientHeight(g);var d={};d.top=parseInt(a.getStyle(g,"marginTop")||0);d.buttom=parseInt(a.getStyle(g,"marginbottom")||0);d.left=parseInt(a.getStyle(g,"marginLeft")||0);d.right=parseInt(a.getStyle(g,"marginRight")||0);j+=d.left+d.right;b+=d.top+d.buttom;c=this.dropTargets;f=n.effectEl||n.clone(g);n.dragController[p].setEffect(f);o=a.getXY(g);var d=o[0],e=o[1];q=[d,e];a.setStyle(f,"left",d+"px");a.setStyle(f,"top",e+"px");this.refreshDropTarget();h=g.parentNode;l=g.nextSibling;document.body.appendChild(f);i.notifyObservers(n,"beforeStart")},this));i.addObserver(this.dragController[p],"start",d.bind(function(){k=null;n.option.isDash?g=n.cloneDashedEl(g):d.browser.ie||a.addClass(g,"ui_halfOpacity");i.notifyObservers(n,"start")},this));i.addObserver(this.dragController[p],"move",d.bind(function(d){var e=d.orientEvent,f=e.pageX,e=e.pageY;if(!(Math.abs(f-q[0])+Math.abs(e-q[1])<1)){var h=f-q[0]>0?"right":"left";q=[f,e];var p={el:null,level:-1,index:0},l;for(l in this.dropPos)if(f>this.dropPos[l].x&&f<this.dropPos[l].x+this.dropPos[l].w&&e>this.dropPos[l].y&&e<this.dropPos[l].y+this.dropPos[l].h){var o=c[l],B=o.el,z=a.getClientWidth(B),z=Math.floor(z/j),r=a.getXY(B),B=f-r[0],r=Math.floor((e-r[1])/b);if(h=="right")var x=Math.ceil(B/j);else h=="left"&&(x=Math.floor(B/j));z=x+r*z;if(p.level<o.level)p.level=o.level,p.el=o.el,p.index=z}(k=p.el)&&(k.getAttribute("customAcceptDrop")?i.notifyObservers(k,"dragmove",d):k.childNodes[z]?k.insertBefore(g,k.childNodes[z]):k.appendChild(g));i.notifyObservers(n,"move",d)}},this));i.addObserver(this.dragController[p],"overFlowBorder",d.bind(function(a){a.el=f;i.notifyObservers(n,"overFlowBorder",a)},this));i.addObserver(this.dragController[p],"end",d.bind(function(b){var j=b.orientEvent,p=j.pageX,j=j.pageY;k&&k.getAttribute&&k.getAttribute("customAcceptDrop")&&i.notifyObservers(k,"drop",{dragEl:e,queue:o,pos:{x:p,y:j},apperceiveEl:g,nextEl:l,parentEl:h});document.body.removeChild(f);n.option.isDash?(n.removeDashedEl(),g=n.tempEl):d.browser.ie||a.removeClass(g,"ui_halfOpacity");var o=[],q;for(q in c){o[q]=[];for(var w=c[q].el.childNodes,y=0;y<w.length;y++){if(!w[y].getAttribute)break;var B=w[y].getAttribute(n.sortStr);B&&o[q].push(B)}}try{i.notifyObservers(n,"end",{queue:o,pos:b,apperceiveEl:g,nextEl:l,parentEl:h})}catch(z){d.out("drop error")}(b=document.elementFromPoint(p,j))&&i.notifyObservers(d.ui,"drop",{dragEl:e,pos:{x:p,y:j},apperceiveEl:g,dropEl:b})},this))},setLimite:function(a){for(var b in this.dragController)this.dragController[b].setLimite(a)},cloneDashedEl:function(b){var d=a.node("div"),g=this.option.className;if(g)a.setClass(d,g);else{a.setStyle(d,"border","dashed 2px #fff");a.setClass(d,b.className);a.setStyle(d,"position","relative");a.setStyle(d,"float","left");var g=b.offsetWidth-10*parseInt(d.style.borderWidth)+"px",f=b.offsetHeight-10*parseInt(d.style.borderWidth)+"px";a.setStyle(d,"width",g);a.setStyle(d,"height",f)}this.dashedEl=d;b.nextSibling?b.parentNode.insertBefore(d,b.nextSibling):b.parentNode.appendChild(d);this.tempEl=b;b.parentNode.removeChild(b);return d},removeDashedEl:function(){this.dashedEl.nextSibling?this.dashedEl.parentNode.insertBefore(this.tempEl,this.dashedEl.nextSibling):this.dashedEl.parentNode.appendChild(this.tempEl);this.dashedEl.parentNode.removeChild(this.dashedEl)},clone:function(b){b=b.cloneNode(!0);b.setAttribute("id","");a.setStyle(b,"position","absolute");a.setStyle(b,"zIndex","9999999");a.setStyle(b,"background","none");return b},forEachNode:function(a,b,d){var f=a.length;if(typeof b!="function")throw new TypeError;for(var i=0;i<f;i++)i in a&&b.call(d,a[i],i,a)}})});Jx().$package(function(d){var a=d.dom,i=d.event;d.ui.ScrollBar=new d.Class({option:{barClass:"scrollBar",barHoverClass:null,barActiveClass:null,showBarContainer:!1},init:function(j,b){var e=this;d.extend(this.option,b);this.bar=a.node("div",{"class":b.scrollBarClassName||"scrollBar"});this.obj=j;this.content=this.obj.getElementsByTagName("div")[0]||this.obj;a.setStyle(this.content,"height","100%");a.setStyle(this.content,"overflow","hidden");if(d.browser.ie)this.bar.innerHTML='<div class="scrollBar_bg scrollBar_bg_t"></div><div class="scrollBar_bg scrollBar_bg_b"></div>';this.onscroll=b.onscroll||function(){};this.scrollToBottom=b.scrollToBottom||function(){};this.ipadTouchArea=b.ipadTouchArea||!1;a.setStyle(this.bar,"marginTop",0);this.obj.appendChild(this.bar);if(b.showBarContainer){this.barBc=a.node("div",{"class":"scrollBar_bgc"});if(d.browser.ie)this.barBc.innerHTML='<div class="scrollBar_bgc_c scrollBar_bgc_t"></div><div class="scrollBar_bgc_c scrollBar_bgc_b"></div>';this.obj.appendChild(this.barBc)}this.setBarHeight();this.wheelThread=20;this.isScrolling=!1;var h={onMouseDown:function(b){var f=b.target;b.changedTouches&&(b=b.changedTouches[0]);e.bar.y=b.clientY;e.bar.t=parseInt(e.bar.style.marginTop);d.platform.iPad?f==e.bar?(i.on(document,"touchmove",h.onMouseMove),i.on(document,"touchend",h.onBarMouseUp)):(i.on(document,"touchmove",h.onTouchAreaMove),i.on(document,"touchend",h.onMouseUp)):(i.on(document,"mousemove",h.onMouseMove),i.on(document,"mouseup",h.onMouseUp),b.stopPropagation());e.isScrolling=!0;e.option.barActiveClass&&a.addClass(e.bar,e.option.barActiveClass)},onMouseMove:function(a){a.changedTouches&&(a.preventDefault(),a=a.changedTouches[0]);e.scroll(a.clientY-e.bar.y);d.platform.iPad||(a.preventDefault(),a.stopPropagation())},onTouchAreaMove:function(a){a.preventDefault();a.stopPropagation();a.changedTouches&&(a=a.changedTouches[0]);e.scroll(-a.clientY+e.bar.y)},onBarMouseUp:function(){d.platform.iPad?(i.off(document,"touchmove",h.onMouseMove),i.off(document,"touchend",h.onBarMouseUp)):(i.off(document,"mousemove",h.onMouseMove),i.off(document,"mouseup",h.onMouseUp));e.isScrolling=!1;e.option.barActiveClass&&a.removeClass(e.bar,e.option.barActiveClass)},onMouseUp:function(){d.platform.iPad?(i.off(document,"touchmove",h.onTouchAreaMove),i.off(document,"touchend",h.onMouseUp)):(i.off(document,"mousemove",h.onMouseMove),i.off(document,"mouseup",h.onMouseUp));e.isScrolling=!1;e.option.barActiveClass&&a.removeClass(e.bar,e.option.barActiveClass)},onMouseOver:function(){a.addClass(e.bar,e.option.barHoverClass)},onMouseOut:function(){a.removeClass(e.bar,e.option.barHoverClass)},onMouseWheel:function(b){if(a.isShow(e.bar)){e.D=b.wheelDelta;b.returnValue=!1;var d=e.D<0?e.wheelThread:0-e.wheelThread;e.bar.y=b.clientY;e.bar.t=parseInt(e.bar.style.marginTop);e.scroll(d)}else e.scrollToBottom(b)},onClick:function(a){a.stopPropagation()},onDomMouseScroll:function(b){a.isShow(e.bar)?(e.D=b.detail>0?-1:1,d.platform.iPad||(b.stopPropagation(),b.preventDefault()),e.bar.y=b.clientY,e.bar.t=parseInt(e.bar.style.marginTop),e.scroll(e.D<0?e.wheelThread:0-e.wheelThread)):e.scrollToBottom(b)}};if(this.option.stopClick)i.on(this.bar,"click",h.onClick);this.option.barHoverClass&&(i.on(this.bar,"mouseover",h.onMouseOver),i.on(this.bar,"mouseout",h.onMouseOut));if(d.platform.iPad){if(i.on(this.bar,"touchstart",h.onMouseDown),this.ipadTouchArea)i.on(this.content,"touchstart",h.onMouseDown)}else i.on(this.bar,"mousedown",h.onMouseDown),d.browser.ie||d.browser.engine.webkit||d.browser.opera?(i.on(this.content,"mousewheel",h.onMouseWheel),i.on(this.bar,"mousewheel",h.onMouseWheel)):(i.on(this.content,"DOMMouseScroll",h.onDomMouseScroll),i.on(this.bar,"DOMMouseScroll",h.onDomMouseScroll))},scrollBack:function(){this.content.scrollTop="0px";this.bar.t=0;this.scroll(0)},refresh:function(){this.update()},update:function(){this.setBarHeight()},setBarHeight:function(){this.onscroll(0,0);this.bar.style.height="0";a.hide(this.bar);this.content.offsetHeight-this.content.scrollHeight>=0?(this.barBc&&a.hide(this.barBc),this.bar.t=0):(this.bar.style.height=parseInt(this.content.offsetHeight/this.content.scrollHeight*this.content.offsetHeight)+"px",a.show(this.bar),this.barBc&&a.show(this.barBc),this.bar.t=parseInt(this.bar.style.marginTop));this.scroll(0)},scroll:function(a){this.marginTop=(this.bar.t||0)+a;if(this.marginTop<0)this.marginTop=0;if(this.marginTop>this.content.clientHeight-this.bar.offsetHeight)this.marginTop=this.content.clientHeight-this.bar.offsetHeight,this.scrollToBottom();this.bar.style.marginTop=this.marginTop+"px";if(a==0)this.onscroll(a,a);var b=(this.content.scrollHeight-this.content.offsetHeight)*parseInt(this.marginTop)/(this.content.offsetHeight-this.bar.offsetHeight);this.content.scrollTop=b;this.onscroll(b,a)},contentScroll:function(a){a=parseInt(this.obj.offsetHeight/this.content.scrollHeight*a);this.scroll(a)},contentPosition:function(){return this.content.scrollTop}})});Jx().$package(function(d){var a=d.dom,i=d.event,j;d.ui.ScrollArea=new d.Class({init:function(b,e){var h=this;j=e?e:document;this.container=b;this.scrollBar=j.createElement("div");this.scrollBar.className="scrollBar";if(d.browser.ie)this.scrollBar.innerHTML='<div class="scrollBar_bg scrollBar_bg_t"></div><div class="scrollBar_bg scrollBar_bg_b"></div>';this.container.appendChild(this.scrollBar);this.wheelThread=20;this.isScrolling=!1;var g,f={onMouseDown:function(b){b.preventDefault();b.stopPropagation();h.isScrolling=!0;g=b.clientY;a.addClass(h.scrollBar,"active");i.on(j,"mousemove",f.onMouseMove);i.on(j,"mouseup",f.onMouseUp)},onMouseMove:function(a){h.scroll((a.clientY-g)/(h.offsetHeight-h.scrollBarHeight)*(h.scrollHeight-h.offsetHeight));g=a.clientY;a.preventDefault();a.stopPropagation()},onClick:function(a){a.preventDefault();a.stopPropagation()},onMouseUp:function(b){b.preventDefault();b.stopPropagation();i.off(j,"mousemove",f.onMouseMove);i.off(j,"mouseup",f.onMouseUp);h.isScrolling=!1;a.removeClass(h.scrollBar,"active")},onMouseOver:function(){a.addClass(h.scrollBar,"hover")},onMouseOut:function(){a.removeClass(h.scrollBar,"hover")},onMouseWheel:function(b){if(a.isShow(h.scrollBar)){var d=b.wheelDelta;b.returnValue=!1;h.scroll(d<0?h.wheelThread:0-h.wheelThread)}},onDomMouseScroll:function(b){if(a.isShow(h.scrollBar)){var d=b.detail>0?-1:1;b.stopPropagation();b.preventDefault();h.scroll(d<0?h.wheelThread:0-h.wheelThread)}}};this.observer=f;i.on(this.scrollBar,"mousedown",f.onMouseDown);i.on(this.scrollBar,"click",f.onClick);i.on(this.scrollBar,"mouseover",f.onMouseOver);i.on(this.scrollBar,"mouseout",f.onMouseOut);d.browser.ie||d.browser.engine.webkit||d.browser.opera?(i.on(this.container,"mousewheel",f.onMouseWheel),i.on(this.scrollBar,"mousewheel",f.onMouseWheel)):(i.on(this.container,"DOMMouseScroll",f.onDomMouseScroll),i.on(this.scrollBar,"DOMMouseScroll",f.onDomMouseScroll));this.update()},update:function(){if(!this.updateTimer){var b=this;this.updateTimer=setTimeout(function(){b.updateTimer=0;b.scrollBar.style.height="0";a.hide(b.scrollBar);b.scrollHeight=b.container.scrollHeight;b.offsetHeight=b.container.offsetHeight;b.scrollBarHeight=b.offsetHeight/b.scrollHeight*b.offsetHeight;if(!(b.scrollHeight<=b.offsetHeight)){a.show(b.scrollBar);if(b.scrollBarHeight<30)b.scrollBarHeight=30;b.scrollBar.style.height=b.scrollBarHeight+"px";b.scrollBar.style.top=b.container.scrollTop+b.container.scrollTop/(b.scrollHeight-b.offsetHeight)*(b.offsetHeight-b.scrollBarHeight)+"px"}},500)}},scroll:function(a){var d=this.scrollHeight-(this.container.scrollTop+this.offsetHeight);a>d&&(a=d);this.container.scrollTop+=a;this.scrollBar.style.top=this.container.scrollTop+this.container.scrollTop/(this.scrollHeight-this.offsetHeight)*(this.offsetHeight-this.scrollBarHeight)+"px"},destroy:function(){i.off(this.scrollBar,"mousedown",this.observer.onMouseDown);i.off(this.scrollBar,"mouseover",this.observer.onMouseOver);i.off(this.scrollBar,"mouseout",this.observer.onMouseOut);d.browser.ie||d.browser.engine.webkit||d.browser.opera?(i.off(this.container,"mousewheel",this.observer.onMouseWheel),i.off(this.scrollBar,"mousewheel",this.observer.onMouseWheel)):(i.off(this.container,"DOMMouseScroll",this.observer.onDomMouseScroll),i.off(this.scrollBar,"DOMMouseScroll",this.observer.onDomMouseScroll));this.container.removeChild(this.scrollBar);this.scrollBar=this.container=null}})});Jx().$package(function(d){var a=d.dom,i=d.event;d.ui=d.ui||{};Jx.ui=Jx.ui||{};var j=d.ui.TouchScroller=new d.Class({container:null,_dx:0,_dy:0,_posy:0,_posx:0,_maxOffsetX:0,_maxOffsetY:0,init:function(b,e){this.container=d.isString(b)?a.id(b):b;this.touchContainer=e||this.container;var h=this;this.observer={onTouchStart:function(a){if(!(a.changedTouches.length>1))a=a.changedTouches[0],h._dx=h.container.scrollLeft,h._dy=h.container.scrollTop,h._posx=a.pageX,h._posy=a.pageY,h.maxOffsetX=h.container.scrollWidth-h.container.clientWidth,h.maxOffsetY=h.container.scrollHeight-h.container.clientHeight,i.on(h.touchContainer,"touchmove",h.observer.onTouchMove),i.on(h.touchContainer,"touchend",h.observer.onTouchEnd)},onTouchMove:function(a){var b=a.changedTouches[0],a=b.pageX,b=b.pageY;h._dx+=h._posx-a;h._dy+=h._posy-b;h._posx=a;h._posy=b;if(h._dx<0)h._dx=0;if(h._dy<0)h._dy=0;if(h._dx>h.maxOffsetX)h._dx=h.maxOffsetX;if(h._dy>h.maxOffsetY)h._dy=h.maxOffsetY;h.container.scrollLeft=h._dx;h.container.scrollTop=h._dy},onTouchEnd:function(){i.off(h.touchContainer,"touchmove",h.observer.onTouchMove);i.off(h.touchContainer,"touchend",h.observer.onTouchEnd)}};i.on(this.touchContainer,"touchstart",this.observer.onTouchStart)},destroy:function(){i.off(this.touchContainer,"touchstart",this.observer.onTouchStart);this.container=null},disable:function(){i.off(this.touchContainer,"touchstart",this.observer.onTouchStart)},enable:function(){i.on(this.touchContainer,"touchstart",this.observer.onTouchStart)}});Jx.ui=Jx.ui||{};Jx.ui.TouchScroller=j});Jx().$package(function(d){var a=d.dom,i=d.string,j=d.event,b=0;d.ui.Button=new d.Class({_class:"ui_button",_available:!0,_shownInLogic:!1,_getButtionId:function(){return b++},init:function(b){var b=b||{},h=this._getButtionId(),g={appendTo:a.getDocumentElement(),className:"",text:"",title:""};d.extend(g,b);this._node=a.node("a",{id:"ui_button_"+h,"class":this._class+" "+i.encodeScript(g.className),title:i.encodeScript(g.title),hidefocus:"",href:"###"});this._node.innerHTML=i.encodeHtml(g.text);g.appendTo.appendChild(this._node);g.event&&this.attachEvent(g.event);g.isStopPropagation&&(j.on(this._node,"mousedown",function(a){a.stopPropagation()}),j.on(this._node,"click",function(a){a.stopPropagation()}))},attachEvent:function(a){for(var b in a)j.on(this._node,b,a[b])},removeEvent:function(a){for(var b in a)j.off(this._node,b,a[b])},setAvailability:function(b){this._available=!!b;this._shownInLogic&&a[this._available?"show":"hide"](this._node)},hide:function(){this._shownInLogic=!1;this._available&&(a.hide(this._node),j.notifyObservers(this,"hide"))},show:function(){this._shownInLogic=!0;this._available&&(a.show(this._node),j.notifyObservers(this,"show"))},setText:function(a){this._node.innerHTML=i.encodeHtml(a)},setTitle:function(a){this._node.title=i.encodeScript(a)},getNode:function(){return this._node},disable:function(b){b?a.addClass(this._node,"window_button_disabled"):a.removeClass(this._node,"window_button_disabled")}})});Jet().$package(function(d){var a=d.dom,i=d.event,j=0,b=function(a){a.preventDefault();a.stopPropagation()},e=d.ui.ContextMenu=new d.Class({init:function(e){var f="context_menu_"+(e.id||j++),g=e.name||f,h=this._parent=e.container||(e.parentMenu?e.parentMenu._parent:null)||document.body,c=e.className||"";this._parentMenu=e.parentMenu;var l=this._el=a.id(f)||a.node("div",{id:f,"class":"context_menu",style:"display: none;"}),c='<div class="context_menu_container "'+c+'"><ul id="'+f+'_body" class="context_menu_item_list"></ul></div>';d.browser.ie&&(c+='<iframe class="context_menu_iframe" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>');l.innerHTML=c;h.appendChild(l);e.width&&a.setStyle(l,"width",e.width+"px");this._body=a.id(f+"_body");i.off(l,"contextmenu");i.on(l,"contextmenu",b);this._popupBox=new d.ui.PopupBox({id:f,name:g,noCatchMouseUp:!0,parentPopupBox:this._parentMenu?this._parentMenu._popupBox:null,container:l});this.setZIndex(9E6);this._itemArr=[];this._key2Item={};if(e.items)this._items_config=e.items,this.addItems(e.items);if(e.triggers)for(var q=this,f=function(a){a.preventDefault();q.show(a.clientX,a.clientY)},g=0;h=e.triggers[g];g++)i.on(h,"contextmenu",f);e.beforeShow&&i.addObserver(this,"BeforeShow",e.beforeShow)},setClass:function(b){a.setClass(this._el,"context_menu "+b)},addItem:function(a){var b=a.type||"item";a.parentMenu=this;switch(b){case "item":a=new h(a);break;case "separator":a=new g(a);break;case "submenu":a.parentMenu=this;a=new f(a);break;default:a=null}a&&(this._body.appendChild(a.getElement()),this._itemArr.push(a))},addItems:function(a){for(var b=0,d=a.length;b<d;b++)this.addItem(a[b])},refresh:function(){this._items_config&&(this.clearItems(),this.addItems(this._items_config))},clearItems:function(){for(var a=this._itemArr.shift();a;)this._body.removeChild(a.getElement()),a.destory(),a=this._itemArr.shift()},removeItemAt:function(a){for(var b=0;b<this._itemArr.length;b++){var d=this._itemArr[b];a==b&&d&&(this._body.removeChild(d.getElement()),d.destory(),this._itemArr.splice(b,1))}},getItemAt:function(a){return a<this._itemArr.length?this._itemArr[a]:null},getElement:function(){return this._el},getBody:function(){return this._body},setZIndex:function(a){this._popupBox.setZIndex(a)},setArgument:function(a){this._argument=a},getArgument:function(){return this._argument},show:function(b,e,f,g){i.notifyObservers(this,"BeforeShow",this);var b=b||0,e=e||0,f=typeof f==="undefined"?5:f,c=this._popupBox,h=b+f,j=e+f,v=0,s=0,m=d.browser.ie;if(g&&(v=a.getOffsetWidth(g),s=a.getOffsetHeight(g),h+=v+5,j-=1,m==9||m==8))h+=2;c.setX("-10000");c.show();var g=a.getClientWidth(this._el),A=a.getClientHeight(this._el),u=a.getClientWidth(),w=a.getClientHeight();if(h+g>u&&b-g-f>0)if(v){if(h=b-g-f-5,m==9||m==8)h+=2}else h=b-g-f;j+A>w&&e-A-f>0&&(j=s?e-A-f+s+1:e-A-f);c.setXY(h,j);i.notifyObservers(this,"onShow",this)},hide:function(){for(var a in this._itemArr)this._itemArr[a].getSubmenu&&this._itemArr[a].getSubmenu().hide();this._popupBox.hide()},isShow:function(){return this._popupBox.isShow()},destory:function(){this._el.innerHTML="";i.off(this._el,"contextmenu");this.clearItems();for(var a in this)this.hasOwnProperty(a)&&delete this[a]}}),h=d.ui.ContextMenuItem=new d.Class({init:function(b){var d={title:b.title||b.text||"",text:b.text||"",link:b.link||"javascript:void(0);",icon:b.icon||null,enable:typeof b.enable==="undefined"?!0:b.enable,onClick:b.onClick||null,argument:b.argument};this.option=d;this.parentMenu=b.parentMenu;b=this._el=a.node("li",{"class":"context_menu_item_container"});this.render();d.enable?this.enable():this.disable();var e=this;i.on(b,"click",d.onClick?function(a){a.preventDefault();e._isEnable&&d.onClick.call(this,a,e,e.parentMenu)}:function(a){a.preventDefault()})},setText:function(a,b){this.option.text=a;this.option.title=b||a;this.render()},setIcon:function(a){this.option.icon=a;this.render()},render:function(){var a=this.option,b='<a class="context_menu_item" href="'+a.link+'" title="'+a.title+'">';if(a.icon){var d=a.icon;b+='<span class="context_menu_item_icon '+(d.className||"")+'" style="'+((d.style||"")+(d.url?"background-image: url("+d.url+");":""))+'"></span>'}b+='<span class="context_menu_item_text">'+a.text+"</span></a>";this._el.innerHTML=b},getElement:function(){return this._el},show:function(){a.show(this._el)},hide:function(){a.hide(this._el)},disable:function(){this._isEnable=!1;a.addClass(this._el,"context_menu_item_disable")},enable:function(){this._isEnable=!0;a.removeClass(this._el,"context_menu_item_disable")},destory:function(){this._el.innerHTML="";i.off(this._el,"click");for(var a in this)this.hasOwnProperty(a)&&delete this[a]}}),g=d.ui.ContextMenuSeparator=new d.Class({init:function(){(this._el=a.node("li",{"class":"context_menu_separator_container"})).innerHTML='<span class="context_menu_separator"></span>'},getElement:function(){return this._el},show:function(){a.show(this._el)},hide:function(){a.hide(this._el)},destory:function(){this._el.innerHTML="";for(var a in this)this.hasOwnProperty(a)&&delete this[a]}}),f=d.ui.ContextSubmenuItem=new d.Class({extend:h},{init:function(b){if(!b.items)throw Error("J.ui.ContextSubmenuItem: option.items is null!");b.title=b.title||b.text||"";var f={title:null,text:"",link:"javascript:void(0);",icon:null,enable:!0,subWidth:null,parentMenu:b.parentMenu};delete b.parentMenu;b=this.option=d.extend(f,b);this.parentMenu=b.parentMenu;var g=this._el=a.node("li",{"class":"context_menu_item_container"});this.render();b.enable?this.enable():this.disable();this._submenu=new e({parentMenu:b.parentMenu,width:b.subWidth,beforeShow:b.beforeShow,items:b.items});var h=this,c=0,j=function(){h._submenu.isShow()&&h._submenu.hide()},q={onItemMouseenter:function(b){b.stopPropagation();h._isEnable&&(b=a.getClientXY(this),h._submenu.show(b[0],b[1],0,this))},onItemMouseleave:function(){c&&(window.clearTimeout(c),c=0);c=window.setTimeout(j,200)},onSubmenuMouseenter:function(){c&&(window.clearTimeout(c),c=0);a.addClass(g,"context_menu_item_hover")},onSubmenuMouseleave:function(b){q.onItemMouseleave(b);a.removeClass(g,"context_menu_item_hover")}};i.on(g,"mouseenter",q.onItemMouseenter);i.on(g,"mouseleave",q.onItemMouseleave);f=h._submenu.getElement();i.on(f,"mouseenter",q.onSubmenuMouseenter);i.on(f,"mouseleave",q.onSubmenuMouseleave);i.on(g,"click",b.onClick?function(a){a.preventDefault();h._isEnable&&(b.onClick.call(this,a,h),q.onItemMouseenter.call(this,a))}:function(a){a.preventDefault();q.onItemMouseenter.call(this,a)})},getSubmenu:function(){return this._submenu},render:function(){var a=this.option,b='<a class="context_menu_item" href="'+a.link+'" title="'+a.title+'">';if(a.icon){var d=a.icon;b+='<span class="context_menu_item_icon '+(d.className||"")+'" style="'+((d.style||"")+(d.url?"background-image: url("+d.url+");":""))+'"></span>'}b+='<span class="context_menu_item_text">'+a.text+'</span><span class="context_menu_item_subicon"></span></a>';this._el.innerHTML=b}})});Jx().$package(function(d){var a=d.dom,i=d.event,j=new d.Class({init:function(b){b=b||{};this.id=b.id;this.name=b.name;this.container=b.container;this.body=b.body||b.container;b.html=b.html||"";b.html&&this.setHtml(b.html);a.isShow(this.container)?this.show():this.hide()},setHtml:function(a){this.html=a;this.body.innerHTML=a},append:function(a){this.body.appendChild(a)},getSize:function(){return{width:a.getClientWidth(this.container),height:a.getClientHeight(this.container)}},getBodySize:function(){return{width:parseInt(a.getStyle(this.body,"width"),10),height:parseInt(a.getStyle(this.body,"height"),10)}},show:function(){a.show(this.container);i.notifyObservers(this,"show",this.getBodySize());this._isShow=!0},hide:function(){a.hide(this.container);i.notifyObservers(this,"hide");this._isShow=!1},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(b){a.setStyle(this.container,"zIndex",b);this._zIndex=b},setXY:function(a,d){this.setX(a);this.setY(d)},setX:function(b){a.setStyle(this.container,"left",b+"px")},setY:function(b){a.setStyle(this.container,"top",b+"px")},setWidth:function(b){a.setStyle(this.container,"width",b+"px")},getWidth:function(){return parseInt(a.getStyle(this.container,"width"))},setHeight:function(b){a.setStyle(this.container,"height",b+"px")},getHeight:function(){return parseInt(a.getStyle(this.container,"height"))}});d.ui.Panel=j});Jx().$package(function(d){var a=d.dom,i=d.event,j=new d.Class({init:function(b){var e=this,b=b||{};this._id=b.id||(new Date).getTime();b.name=b.id;b.width=b.width||300;b.height=b.height||300;b.appendTo=b.appendTo||document.body;b.zIndex=b.zIndex||1;var h=a.node("div",{"class":"ui_boxy"});h.innerHTML='\t\t\t\t<div style="position:relative; z-index:1;"><div class="ui_boxyClose" id="ui_boxyClose_'+this._id+'"></div></div>\t\t\t\t<div class="ui_boxyWrapper" id="ui_boxyWrapper_'+this._id+'"></div>\t\t\t\t';b.appendTo.appendChild(h);b.container=h;b.body=a.id("ui_boxyWrapper_"+this._id);this._option=b;this._panel=new d.ui.Panel(b);this._panel.setWidth(b.width);this._panel.setHeight(b.height);if(b.modal)this._maskLayer=new d.ui.MaskLayer({appendTo:b.appendTo,zIndex:b.zIndex,opacity:0.5}),this._maskLayer.show();this._panel.setZIndex(b.zIndex+1);this.setCenter(b);new d.ui.Drag(h,h,{isLimited:!0});h=a.id("ui_boxyClose_"+this._id);this._wrapper=a.id("ui_boxyWrapper_"+this._id);i.on(h,"click",function(){e.close();b.onClose&&b.onClose.apply(e);i.notifyObservers(e,"close")})},getPanel:function(){return this._panel},show:function(){this._panel.show()},hide:function(){this._panel.hide()},setZIndex:function(a){this._panel.setZIndex(a)},setCenter:function(b){var d=a.getClientWidth(),h=a.getClientHeight();this._panel.setXY(d>b.width?(d-b.width)/2:0,h>b.height?(h-b.height)/2:0)},isShow:function(){return this._panel.isShow()},close:function(){this._maskLayer&&this._maskLayer.remove();this._option.appendTo.removeChild(this._option.container)}});d.ui.Boxy=j});Jet().$package(function(d){var a=d.dom,i=d.event,j=d.ui.Bubble=d.Class({init:function(b){var b=b||{},b=this.option=d.extend({bubbleParent:document.body,className:"",hasCloseButton:!0,closeOnHide:!1,zIndex:1E6},b),e=this._getId(),h='<div id="bubble_tip_pointer_'+e+'" class="bubble_tip_pointer bubble_tip_pointer_left"></div>\t            <div class="bubble_tip_head"></div>\t            <div class="bubble_tip_body">\t                <div class="bubble_tip_title"><a id="bubble_tip_close_'+e+'" href="###" class="bubble_tip_close" title="\u5173\u95ed">x</a>                        <span id="bubble_tip_title_'+e+'"></span></div>\t                <div id="bubble_tip_content_'+e+'" class="bubble_tip_content"></div>\t            </div>\t            <div id="bubble_tip_foot_'+e+'" class="bubble_tip_foot">\t                <a id="bubble_tip_btn_next_'+e+'" href="###" class="bubble_tip_btn"></a>                    <a id="bubble_tip_btn_ok_'+e+'" href="###" class="bubble_tip_btn"></a>\t            </div>                <iframe width="100%" height="100%" class="bubble_tip_bg_iframe" src="about:blank"></iframe>',g=a.node("div",{"class":"bubble_tip_container "+b.className});g.innerHTML=h;a.setCssText(g,"left: -10000px; top: 0px; z-index: "+b.zIndex+";");b.bubbleParent.appendChild(g);this._container=g;this._title=a.id("bubble_tip_title_"+e);this._content=a.id("bubble_tip_content_"+e);this._pointer=a.id("bubble_tip_pointer_"+e);this._okBtn=a.id("bubble_tip_btn_ok_"+e);this._nextBtn=a.id("bubble_tip_btn_next_"+e);this._closeBtn=a.id("bubble_tip_close_"+e);b.hasCloseButton||a.hide(this._closeBtn);var f=this,b={onCloseBtnClick:function(a){a.preventDefault();a.stopPropagation();i.notifyObservers(f,"onBubbleClose",f);f.hide()},onOkButtonClick:function(a){a.preventDefault();a.stopPropagation();i.notifyObservers(f,"onBubbleOkBtnClick",f);f.hide()},onNextButtonClick:function(a){a.preventDefault();a.stopPropagation();i.notifyObservers(f,"onBubbleNextBtnClick",f)}};i.on(this._closeBtn,"click",b.onCloseBtnClick);i.on(this._okBtn,"click",b.onOkButtonClick);i.on(this._nextBtn,"click",b.onNextButtonClick)},getElement:function(){return this._container},show:function(b){b=b||{};b=d.extend({pointerPosition:"top right",pointerOffset:20,pointerSize:[18,12],position:[0,0],target:null,targetOffset:[0,0]},b);if(!this._checkPointerPosition(b.pointerPosition))throw Error("Bubble >>>> the pointerPosition's value is not correct");this._setPointerPosition(b.pointerPosition,b.pointerOffset);this._setBubblePosition(b);a.show(this._container)},setZIndex:function(b){a.setStyle(this._container,"zIndex",b)},setContainerStyle:function(b,d){a.setStyle(this._container,b,d)},setTitle:function(a){this._title.innerHTML=a},setContent:function(a){this._content.innerHTML=a},showButton:function(b,e,h){b=this["_"+b+"Btn"];h=d.isUndefined(h)?!1:!0;if(b)b.innerHTML=e,a.show(b),h?a.addClass(b,"bubble_tip_btn_next"):a.addClass(b,"bubble_tip_btn_ok");return b},hideButton:function(b){(b=this["_"+b+"Btn"])&&a.hide(b)},hide:function(){a.hide(this._container);this.option.closeOnHide&&this.close()},close:function(){if(this._isClosed)d.warn("Trying to close a closed bubbleTip!","BubbleTip");else{this._isClosed=!0;i.off(this._closeBtn,"click");i.off(this._okBtn,"click");i.off(this._nextBtn,"click");this._container.parentNode&&this._container.parentNode.removeChild(this._container);for(var a in this)this.hasOwnProperty(a)&&delete this[a]}},isClose:function(){return this._isClosed},_getId:function(){if(!j.__id)j.__id=0;return j.__id++},_setPointerPosition:function(b,d){var h=b.split(" "),g=this._pointer;a.setClass(g,"bubble_tip_pointer bubble_tip_pointer_"+h[0]);a.setCssText(g,"");a.setStyle(g,h[1],d+"px")},_setBubblePosition:function(b){var d=b.position;if(b.target){var h=b.pointerPosition.split(" "),g=this._calculateBubblePosition(b.target,b.pointerSize,b.pointerOffset),f=0;/top|bottom/.test(h[0])&&(f=1);d[0]=g[h[f]+f];f=(f+1)%2;d[1]=g[h[f]+f]}h=d[1]+b.targetOffset[1];a.setStyle(this._container,"left",d[0]+b.targetOffset[0]+"px");a.setStyle(this._container,"top",h+"px")},_calculateBubblePosition:function(b,d,h){var g=this._container,f=a.getClientXY(b),i=a.getOffsetWidth(g),g=a.getOffsetHeight(g),j=a.getWidth(b),b=a.getHeight(b),o=f[0],f=f[1];h+=d[0]/2;d=d[1];return{top0:f+b+d,bottom0:f-g-d,left0:o+j+d,right0:o-i-d,top1:f+b/2-h,bottom1:f+b/2-g+h,left1:o+j/2-h,right1:o+j/2-i+h}},_checkPointerPosition:function(a){var a=a.split(" "),d=/left|right/,h=/top|bottom/;if(h.test(a[0])&&d.test(a[1]))return!0;else if(d.test(a[0])&&h.test(a[1]))return!0;return!1}})});Jx().$package(function(d){var a=d.event,i=null,j=new d.Class({extend:d.ui.Panel},{callSuper:function(a){var d=Array.prototype.slice,h=d.call(arguments,1);j.superClass[a].apply(this,h.concat(d.call(arguments)))},init:function(a){this.parentPopupBox=a.parentPopupBox;this.callSuper("init",a);var d=this;this.catchMouseUp=!0;if(a.noCatchMouseUp)this.catchMouseUp=!1;this.closeOnEsc=!0;if(a.noCloseOnEsc)this.closeOnEsc=!1;this.onDocumentKeydown=function(a){a.keyCode===27&&(a.preventDefault(),d.hide())};this.onMouseUp=function(){d.isShow()&&d.hide()};this.onDocumentClick=function(){d.hide()};this.onWindowResize=function(){d.hide()}},show:function(){i&&this.parentPopupBox!=i&&i.hide();if(this.catchMouseUp)a.on(document.body,"mouseup",this.onMouseUp);if(this.closeOnEsc)a.on(document,"keydown",this.onDocumentKeydown);a.on(document.body,"click",this.onDocumentClick);a.on(window,"resize",this.onWindowResize);this.parentPopupBox||(i=this);this.callSuper("show")},hide:function(){a.off(document.body,"click",this.onDocumentClick);a.off(document,"keydown",this.onDocumentKeydown);a.off(window,"resize",this.onWindowResize);a.off(document.body,"mouseup",this.onMouseUp);i&&!this.parentPopupBox&&(i!==this&&i.hide(),i=null);this.callSuper("hide")},destroy:function(){this.container.parentNode.removeChild(this.container)}});d.ui.PopupBox=j});Jx().$package(function(d){var a=d.dom,i=d.event,j=0;d.ui.MaskLayer=new d.Class({_getMaskId:function(){return j++},init:function(b){var b=b||{},e=this._getMaskId(),h=this;this._initZIndex=b.zIndex=!d.isUndefined(b.zIndex)?b.zIndex:9E6;this._initOpacity=b.opacity=!d.isUndefined(b.opacity)?b.opacity:0.5;b.appendTo=b.appendTo||document.body;b.className=b.className||"";this.option=b;this.container=a.node("div",{id:"ui_maskLayer_"+e,"class":"ui_maskLayer "+b.className});var g='<div id="ui_maskLayerBody_'+e+'" class="ui_maskLayerBody"></div>';d.browser.ie&&(g+='<iframe class="ui_maskBgIframe"></iframe>');this.container.innerHTML=g;this.reset();b.appendTo.appendChild(this.container);i.on(this.container,"click",function(){i.notifyObservers(h,"click",h)});this.body=a.id("ui_maskLayerBody_"+e)},getElement:function(){return this.container},append:function(a){this.body.appendChild(a)},show:function(){a.show(this.container);i.notifyObservers(this,"show");this._isShow=!0},hide:function(){a.hide(this.container);i.notifyObservers(this,"hide");this._isShow=!1},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(b){a.setStyle(this.container,"zIndex",b);this._zIndex=b},setOpacity:function(b){a.setStyle(this.container,"opacity",b)},reset:function(){this.setOpacity(this._initOpacity);this.setZIndex(this._initZIndex);return this},fadeIn:function(){this.show()},fadeOut:function(){this.hide()},remove:function(){this.option.appendTo&&this.option.appendTo.removeChild(this.container)},about:function(){}})});Jet().$package(function(d){var a=d.dom,i=d.event;d.ui.TextBox=new d.Class({init:function(j){var b="share_box_"+(j.id||(new Date).getTime()),e=j.name||b,h=j.container||document.body,g=j.className||"",f=j.text||"";this._titleHeight=22;this._footerHeight=26;this._margin=this._padding=8;j.width=j.width||200;j.height=j.height||100;j.limit=j.limit||0;j.isPopup=j.isPopup||!1;j.readOnly=j.readOnly||!1;j.maskIframe=j.maskIframe||!1;this._isShow=!1;var g=this._el=a.node("div",{id:b,"class":"share_box "+g}),n='            \t<div class="share_box_title" id="'+b+'_title">            \t\t<div class="share_box_titleTxt" id="'+b+'_titleTxt"></div>            \t</div>            \t<div class="share_box_body" id="'+b+'_body">            \t\t<\!--textarea class="share_box_text" id="'+b+'_text"></textarea--\>            \t</div>           \t\t<div class="share_box_footer" id="'+b+'_footer">           \t\t\t<div class="share_box_showthumb" id="'+b+'_showthumb"></div>           \t\t\t<div class="share_box_hint" id="'+b+'_hint"></div>           \t\t\t<div class="share_box_count" id="'+b+'_count"></div>           \t\t</div>           \t\t<div>           \t\t\t<img id="'+b+'_thumb" class="share_box_thumb" src="'+j.thumb+'" width=211 height=127 />           \t\t</div>';j.maskIframe&&(n+='<iframe class="ui_maskBgIframe" src="'+alloy.CONST.MAIN_URL+'domain.html;" border="0"></iframe>');g.innerHTML=n;h.appendChild(g);this._panel=j.isPopup?new d.ui.PopupBox({id:b,name:e,container:g}):new d.ui.Panel({id:b,name:e,container:g});this._shareBoxTitleTxt=a.id(b+"_titleTxt");this._shareBoxTitle=a.id(b+"_title");this._shareBoxHint=a.id(b+"_hint");this._shareBoxFooter=a.id(b+"_footer");this._shareBoxBody=a.id(b+"_body");this._shareBoxCount=a.id(b+"_count");this._shareBoxShowthumb=a.id(b+"_showthumb");this._shareBoxThumb=a.id(b+"_thumb");e='<strong class="share_big_quote share_left_quote">\u201c</strong><textarea class="share_box_text" id="'+b+'_text"></textarea><strong class="share_big_quote share_right_quote">\u201d</strong>';j.readOnly&&(e='<strong class="share_big_quote share_left_quote">\u201c</strong><textarea class="share_box_text" id="'+b+'_text" readOnly="readonly"></textarea><strong class="share_big_quote share_right_quote">\u201d</strong>');j.thumb||a.hide(this._shareBoxShowthumb);this._shareBoxBody.innerHTML=e;this._shareBoxText=a.id(b+"_text");var k=this,b={onSendButtonClick:function(a){a.preventDefault();a.stopPropagation();i.notifyObservers(k,"clickSendButton")},onCloseButtonClick:function(a){a.preventDefault();a.stopPropagation();k.hide();i.notifyObservers(k,"clickCloseButton")},onTextAreaKeyUp:function(a){a.stopPropagation();a.preventDefault();alloy.util.subStringByChar(a,j.limit)},toggleThumb:function(b){b.preventDefault();b.stopPropagation();a.isShow(k._shareBoxThumb)?a.hide(k._shareBoxThumb):a.show(k._shareBoxThumb)}};this._sendButton=new d.ui.Button({appendTo:this._shareBoxFooter,className:"window_button window_ok",isStopPropagation:!0,text:"\u53d1\u8868",event:{click:b.onSendButtonClick}});this._closeButton=new d.ui.Button({appendTo:this._shareBoxTitle,className:"textbox_button",isStopPropagation:!0,title:"\u5173\u95ed",event:{click:b.onCloseButtonClick}});this._sendButton.show();this._closeButton.show();this._shareBoxText.innerHTML=f;if(j.title)this._shareBoxTitleTxt.innerHTML=j.title,a.show(this._shareBoxTitle);if(j.hint){f=null;for(e=0;e<j.hint.length;e++)f=a.node("a",{href:"###","class":"share_box_hintLink"}),f.innerHTML=j.hint[e].text,i.on(f,"click",j.hint[e].click),this._shareBoxHint.appendChild(f)}if(j.limit)i.on(this._shareBoxText,"keyup",b.onTextAreaKeyUp);i.on(this._shareBoxShowthumb,"click",b.toggleThumb);this.setHeight(j.height);this.setWidth(j.width)},setHeight:function(d){a.setStyle(this._shareBoxText,"height",d-this._titleHeight-this._footerHeight+"px")},setWidth:function(d){a.setStyle(this._el,"width",d+"px");a.setStyle(this._shareBoxText,"width",d-this._padding-this._margin+"px")},addMask:function(i){if(d.browser.ie)if(d.isString(i)){var b='<iframe class="ui_maskBgIframe" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>';return i+b}else b=a.node("iframe",{"class":"ui_maskBgIframe",src:alloy.CONST.MAIN_URL+"domain.html"}),i.appendChild(b)},getElement:function(){return this._el},isShow:function(){return this._isShow},show:function(a,b){a&&b&&this._panel.setXY(a,b);this._panel.show();this._isShow=!0},hide:function(){this._panel.hide();this._isShow=!1;i.notifyObservers(this,"hide")},getValue:function(){return this._shareBoxText.value},setValue:function(a){this._shareBoxText.value=a},setHint:function(d){this._shareBoxHint.innerHTML="";this._shareBoxHint.appendChild(d);a.show(this._shareBoxHint)},setThumb:function(a){this._shareBoxThumb.src=a}})});Jet().$package(function(d){var a=d.dom,i=d.event;d.ui.DivSelect=new d.Class({init:function(d,b,e,h,g,f){this._selectName=b;this._dataObj=e;this._selOption=h;this._isUpper=f||!1;e=e.data;d=document.getElementById(d);if(!d||typeof d==="undefined")return!1;f=document.createElement("div");isNaN(g)||g==""?g=150:g<26&&(g=26);f.style.width=g;var n="";if(this._isUpper){f.style.position="relative";var k=15*e.length,n="top:-"+((k>150?150:k)+4)+"px;"}k="";if(e.length>0){k+="<input type='hidden' name='"+b+"' id='"+b+"' value='"+this.relv(h,e)+"'>";k+="<div id='_a_"+b+"' style='width:"+g+"px;height:18px; border:1px #728EA4 solid;'>";k+="<div id='_v_"+b+"' style='position:relative;float:left;left:2px;width:"+(g-22)+"px;height:18px;font-size:12px;overflow:hidden;line-height:18px;'>"+this.reStr(e,h)+"</div>";k+="<div id='_arr_"+b+"' class='divSelect_arr' style='position:relative;float:right;right:0px;width:18px;height:18px;text-align:center;font-family:Webdings;font-size:16px;overflow:hidden;background-color:#FFF;cursor:pointer!important;cursor:hand;'></div>";k+="</div>";k+="<div id='_b_"+b+"' style='position:absolute; background-color:#FFFFFF; width:"+g+"px; height:"+this.height(e.length)+"px;border:1px #728EA4 solid;overflow-x:hidden;overflow-y:auto;display:none; z-index:99999;"+n+"'>";for(g=0;g<e.length;g++)n=e[g][0]==h?this.style(2):this.style(1),k+="<div id='_s_"+b+g+"' style='"+n+"' >"+e[g][1]+"</div>";k+="</div>"}else k+="<input type='hidden' name='"+b+"' id='"+b+"' value='"+h+"'>",k+="<div id='_a_"+b+"' style='width:"+g+"px;height:18px; border:1px #728EA4 solid;'>",k+="<div id='_v_"+b+"' style='position:relative;float:left;left:2px;width:"+(g-22)+"px;height:18px;font-size:12px;overflow:hidden;line-height:18px;'></div>",k+="<div id='_arr_"+b+"' class='divSelect_arr' style='position:relative;float:right;right:0px;width:18px;height:18px;text-align:center;font-family:Webdings;font-size:16px;overflow:hidden;background-color:#FFF;cursor:pointer!important;cursor:hand;'></div>",k+="</div>",k+="<div id='_b_"+b+"' style='position:absolute; background-color:#FFFFFF; width:"+g+"px; height:"+this.height(0)+"px;border:1px #728EA4 solid;overflow-x:hidden;overflow-y:auto;display:none; z-index:99999;'></div>";f.innerHTML=k;d.appendChild(f);var o=this,h=function(){o.showOptions()};i.on(a.id("_v_"+b),"click",h);i.on(a.id("_arr_"+b),"click",h);if(e.length>0){h=function(){o.css(this,3)};d=function(){o.css(this,1)};f=function(){o.selected(this)};for(g=0;g<e.length;g++)i.on(a.id("_s_"+b+g),"mouseover",h),i.on(a.id("_s_"+b+g),"mouseout",d),i.on(a.id("_s_"+b+g),"click",f)}},value:function(a){a=a||this._selectName;return document.getElementById(a).value},text:function(a){a=a||this._selectName;return document.getElementById("_v_"+a).innerHTML},selected:function(d){for(var b=this._dataObj.data,e=d.innerHTML,h=0;h<b.length;h++){if(b[h][1]===e)a.id(this._selectName).value=b[h][0];a.id("_s_"+this._selectName+h).style.cssText=this.style(1)}a.id("_v_"+this._selectName).innerHTML=e;d.style.cssText=this.style(2);this.hidden();i.notifyObservers(this,"selectedChanged")},relv:function(a,b){for(var d=0;d<b.length;d++)if(b[d][0]==a)return a;if(a==null||a=="")return b[0][0]},reStr:function(a,b){for(var d=0;d<a.length;d++)if(a[d][0]==b)return a[d][1];if(b==null||b=="")return a[0][1]},height:function(a){a=a>10||a<1?150:a*15;a+=2;return a},showOptions:function(a){a=a||this._selectName;a=document.getElementById("_b_"+a);a.style.display=a.style.display=="none"?"":"none"},hidden:function(){document.getElementById("_b_"+this._selectName).style.display="none"},style:function(a){var b="";switch(a){case 1:b="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#FFFFFF; color:#000000; font-weight:normal;";break;case 2:b="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#315DAD; color:#FFFFFF; font-weight:bold;";break;case 3:b="height:15px; font-size:12px; line-height:15px; overflow:hidden; background-color:#D8D8D8; color:#000000; font-weight:normal;"}return b},css:function(d,b){if(a.id("_v_"+this._selectName).innerHTML!=d.innerHTML)d.style.cssText=this.style(b)}})});Jx().$package(function(d){var a=d.dom.id,i=d.dom,j=d.event,b=d.string,e=d.http,h=this,g=d.string.mapQuery(window.location.search),f=window.open;window.open=function(a,b,e,c){b==void 0&&(b="_blank");e==void 0&&(e="");c==void 0&&(c=!1);return!f(a,b,e,c)?(d.out("\u4f60\u7684\u673a\u5668\u4e0a\u6709\u8f6f\u4ef6\u62e6\u622a\u4e86\u5f39\u51fa\u7a97\u53e3"),!1):!0};var n=new d.Class({_defaultType:3,_defaultTag:"information",_defaultTemplate:"<%=msg%>(<%=type%>#<%=tag%>@<%=time%>)",TYPE:["PROFILE","WARNING","ERROR","INFO","DEBUG"],init:function(a){this.msg=a.msg||"";this.tag=a.tag||this._defaultTag;this.type=d.isUndefined(a.type)?this._defaultType:a.type;this.time=(new Date).valueOf();this._template=a.template||this._defaultTemplate},format:function(a,d,e){e=e||this._template;return d?b.encodeHtml(b.template(e,a)):b.template(e,a)},parseOption:function(){return{msg:this.msg,time:this.time,type:this.TYPE[this.type],tag:this.tag}},toString:function(a,b){return this.format(this.parseOption(),a,b||this._template)}});d.config={debugLevel:1};d.console={};d.Report={receive:d.emptyFunc,addRule:d.emptyFunc};d.extend(d.console,{_isCreated:!1,_maxLength:1E3,_html:'<div id="ConsoleBoxHead" class="consoleBoxHead">\t\t\t\t\t\t<a href="###" id="ConsoleCloseButton" class="consoleCloseButton" title="\u5173\u95ed">X</a>\t\t\t\t\t\t<a href="###" id="ConsoleClearButton" class="consoleCloseButton" title="\u6e05\u9664\u6240\u6709\u65e5\u5fd7">cls</a>\t\t\t\t\t\t<a href="###" id="ConsoleRefreshButton" class="consoleCloseButton" title="\u8fd8\u539f\u6240\u6709\u65e5\u5fd7">r</a>\t\t\t\t\t\t<a href="###" id="ConsoleHelpButton" class="consoleCloseButton" title="\u63a7\u5236\u53f0\u5e2e\u52a9">H</a>\t\t\t\t\t\t<h5 class="title" title="\u63a7\u5236\u53f0">Console</h5>\t\t\t\t\t</div>\t\t\t\t\t<div id="consoleMain" class="consoleMain">\t\t\t\t\t\t<ul id="ConsoleOutput" class="consoleOutput"></ul>\t\t\t\t\t</div>\t\t\t\t\t<div class="consoleInputBox">\t\t\t\t\t\t&gt;<input id="ConsoleInput" class="consoleInput" title="\u8bf7\u8f93\u5165\u63a7\u5236\u53f0\u6307\u4ee4\u6216\u8005Javascript\u8bed\u53e5..." />\t\t\t\t\t</div>',_opened:!1,_log_record:[],_cmd_history:[],_cmd_last_index:0,isCustomConsole:!0,_templateArr:["<%=msg%>","<%=msg%>(<%=type%>#<%=tag%>@<%=time%>)"],_templateType:0,_typeInfo:[["log_profile_type","\u2514"],["log_warning_type","!"],["log_error_type","x"],["log_info_type","i"],["log_debug_type","\u221a"]],TYPE:{PROFILE:0,WARNING:1,ERROR:2,INFO:3,DEBUG:4},show:function(){this._isCreated||this._create();this._opened=!0;this._main.style.display="block";this.render();window.setTimeout(d.bind(this.focusCommandLine,this),0)},hide:function(a){a&&a.preventDefault();this.clear();d.console._main.style.display="none";d.console._opened=!1},enable:function(){d.option.console=!0;this.show()},disable:function(){d.option.console=!1;this.hide()},_init:function(){j.on(document,"keydown",d.bind(this.handleDocumentKeydown,this));d.option.console&&this.show();this.setToDebug()},_create:function(){e.loadCss(d.path+"assets/jet.css");this._main=document.createElement("div");this._main.id="JxConsole";this._main.style.display="none";this._main.className="consoleBox";this._main.innerHTML=this._html;window.document.body.appendChild(this._main);var b=i.getClientWidth(),f=i.getClientHeight(),b=b-210-300;i.setStyle(this._main,"top",f-50-310+"px");i.setStyle(this._main,"left",b+"px");this._headEl=a("ConsoleBoxHead");this._inputEl=a("ConsoleInput");this._closeButtonEl=a("ConsoleCloseButton");this._clsButtonEl=a("ConsoleClearButton");this._refreshButtonEl=a("ConsoleRefreshButton");this._helpButtonEl=a("ConsoleHelpButton");this._outputEl=a("ConsoleOutput");this._consoleMainEl=a("consoleMain");d.ui.Drag&&new d.ui.Drag(this._headEl,this._main);j.on(this._inputEl,"keyup",d.bind(this.onInputKeyup,this));j.on(this._clsButtonEl,"click",d.bind(this.clear,this));j.on(this._refreshButtonEl,"click",d.bind(this.refresh,this));j.on(this._helpButtonEl,"click",d.bind(this.help,this));j.on(this._closeButtonEl,"click",d.bind(this.hide,this));f={hScrollbar:!0,vScrollbar:!0,checkDOMChanges:!1,desktopCompatibility:!0};if(d.browser.mobileSafari&&d.ui.iScroll&&!this.consoleScroller)this.consoleScroller=new d.ui.iScroll(this._outputEl,f),d.debug("!!!!2","console");this._isCreated=!0},handleDocumentKeydown:function(a){switch(a.keyCode){case 192:a.ctrlKey&&a.shiftKey&&(this.toggleShow(),a.preventDefault())}},focusCommandLine:function(){this._inputEl.focus()},toggleShow:function(){this._opened?this.hide():this.show()},outConsoleShow:function(a,b){this.outConsole(a,b);!this._opened&&d.option.console&&this.show()},outConsole:function(a){if(this._opened){var b=document.createElement("li");this._outputEl.appendChild(b);var e=d.console._typeInfo[a.type]||d.console._typeInfo[0],c=this._templateArr[this._templateType];b.className=e[0];b.innerHTML='<div class="log_icon" title="'+e[0]+'">'+e[1]+'</div><div class="log_text">'+a.toString(!0,c)+"</div>";this.consoleScroller&&this.consoleScroller.refresh();this._consoleMainEl.scrollTop=this._consoleMainEl.scrollHeight}},print:function(a){var b=document.createElement("li");this._outputEl.appendChild(b);b.innerHTML=a;this._consoleMainEl.scrollTop=this._consoleMainEl.scrollHeight},out:function(a,b,d){var c=this._templateArr[this._templateType],a=new n({msg:a,tag:b,type:d});this.logRecord(a);g&&g.consolefilter?a.tag==g.consolefilter&&(this.isCustomConsole?this.outConsole(a):h.console.log(a.toString(!1,c))):this.isCustomConsole?this.outConsole(a):h.console.log(a.toString(!1,c))},profile:function(a,b){this.out(a,b||"system",0)},warn:function(a,b){this.out(a,b,1)},error:function(a,b){this.out(a,b,2)},info:function(a,b){this.out(a,b,3)},debug:function(a,b){this.out(a,b,4)},setToDebug:function(){this.isCustomConsole=g.console&&g.console=="firebug"?!1:!0},setToNoDebug:function(){this.out=d.emptyFunc},logRecord:function(a){this._log_record.push(a);g.console||this._log_record.length>this._maxLength&&this._log_record.shift()},setTemplate:function(a){if(this._templateArr[a])this._templateType=a},filter:function(a){var b=RegExp(a,"i"),e=[];d.array.forEach(this._log_record,function(a){var d=a.toString(!0);b.test(d)&&e.push(a)});return e},filterByType:function(a,b){var e=[],a=a||[];d.array.forEach(a,function(a){var f=!1;d.array.forEach(b,function(b){a.type==b&&(f=!0)});f&&e.push(a)});return e},filterByTag:function(a,b){var e=[],a=a||[];d.array.forEach(a,function(a){var f=!1;d.array.forEach(b,function(b){a.tag==b&&(f=!0)});f&&e.push(a)});return e},filterByMsg:function(a,b){var e=[],a=a||[];d.array.forEach(a,function(a){var f=!1;d.array.forEach(b,function(b){a.msg.indexOf(b)>-1&&(f=!0)});f&&e.push(a)});return e},getReport:function(a,b,e){var c=[],f=this._log_record,g=this;!a||a==""?a=!1:d.isArray(a)||(a=[a]);!b||b==""?b=!1:d.isArray(b)||(b=[b]);!e||e==""?e=!1:d.isArray(e)||(e=[e]);a&&(f=this.filterByType(f,a));b&&(f=this.filterByTag(f,b));e&&(f=this.filterByMsg(f,e));d.array.forEach(f,function(a){c.push(a.toString(!1,g._templateArr[1]))});return c.join(",")},render:function(a){var a=a||this._log_record,b=this;b.clear();d.array.forEach(a,function(a){b.outConsole(a)})},clear:function(a){a&&a.preventDefault();d.console._outputEl.innerHTML=""},refresh:function(a){a&&a.preventDefault();this.clear();this.render()},help:function(a){a&&a.preventDefault();this.print("&lt;&lt; Console Help &gt;&gt;<br/>\t\t\t\t\t\t\t\thelp|h  : \u63a7\u5236\u53f0\u5e2e\u52a9<br/>\t\t\t\t\t\t\t\tclear|cls : \u6e05\u7a7a\u63a7\u5236\u53f0\u8f93\u51fa<br/>\t\t\t\t\t\t\t\trefresh|r : \u5237\u65b0\u63a7\u5236\u53f0\u8f93\u51fa<br/>\t\t\t\t\t\t\t\tfilter|f : \u8fc7\u6ee4\u63a7\u5236\u53f0\u8f93\u51fa<br/>\t\t\t\t\t\t\t\tsetTemplate|s : \u8bbe\u7f6e\u8f93\u51fa\u6a21\u7248\u7c7b\u578b<br/>\t\t\t\t\t\t\t\thide  : \u9690\u85cf\u63a7\u5236\u53f0\uff0c\u6216\u8005\u4f7f\u7528 Ctrl+Shift+`[~] \u5feb\u6377\u952e")},onInputKeyup:function(a){switch(a.keyCode){case 13:this._cmd_history.push(d.console._inputEl.value);this._cmd_last_index=this._cmd_history.length;this._execCommand(d.console._inputEl.value);break;case 38:if(this._cmd_history.length==0)break;a="";this._cmd_last_index>0?(this._cmd_last_index--,a=this._cmd_history[this._cmd_last_index]):this._cmd_last_index=-1;d.console._inputEl.value=a;break;case 40:if(this._cmd_history.length==0)break;a="";this._cmd_last_index<this._cmd_history.length-1?(this._cmd_last_index++,a=this._cmd_history[this._cmd_last_index]):this._cmd_last_index=this._cmd_history.length;d.console._inputEl.value=a}},_execCommand:function(a){a=="help"||a=="h"?this.help():a=="clear"||a=="cls"?d.console.clear():a=="hide"?d.console.hide():a=="refresh"||a=="r"?this.refresh():RegExp(/^(?:filter|f)(?:\(|\s+)(.+)(?:\)|\s*)$/i).test(a)?(a=eval("this.filter('"+RegExp.$1+"')"),a.length>0?this.render(a):(this.clear(),this.out("NO RESULT!",1))):RegExp(/^(?:setTemplate|s)(?:\(|\s+)(\d+)(?:\)|\s*)$/i).test(a)?(this.setTemplate(parseInt(RegExp.$1)),this.refresh()):this._execScript(a);d.console._inputEl.value=""},_execScript:function(a){var b='<span style="color:#ccff00">'+a+"</span><br/>";try{b+=(eval(a)||"").toString().replace(/</g,"&lt;").replace(/>/g,"&gt;"),d.console.print(b,0)}catch(e){b+=e.description,d.console.print(b,1)}}});d.profile=d.console.profile;d.warn=d.console.warn;d.error=d.console.error;d.info=d.console.info;d.debug=d.console.debug;j.onDomReady(function(){d.console._init();if(g.console=="true")d.console=d.extend(d.console,{profile:d.emptyFunc,warn:d.emptyFunc,error:d.emptyFunc,info:d.emptyFunc,debug:d.emptyFunc}),d.console.show()});g.console&&g.console=="firebug"&&(h.console||e.loadScript(d.path+"firebug/firebug-lite.js",{onSuccess:function(){if(firebug)firebug.env.height=220,firebug.env.css="../../source/firebug/firebug-lite.css",d.out("...\u63a7\u5236\u53f0\u5f00\u542f"),d.out("...\u6d4b\u8bd5\u6210\u529f")}}));d.runtime=function(){function a(){return d.config.debugLevel>0}function b(c,f){var g;a()?g=c+"\n=STACK=\n"+e():f=="error"&&(g=c);d.Debug.errorLogs.push(g)}function e(a,b){function d(a,b){if(a.stack)return a.stack;else if(a.message.indexOf("\nBacktrace:\n")>=0){var c=0;return a.message.split("\nBacktrace:\n")[1].replace(/\s*\n\s*/g,function(){c++;return c%2==0?"\n":" @ "})}else{for(var f=b.callee==e?b.callee.caller:b.callee,g=f.arguments,h=[],i=0,j=g.length;i<j;i++)h.push(typeof g[i]=="undefined"?"<u>":g[i]===null?"<n>":g[i]);g=/function\s+([^\s\(]+)\(/;return((g.test(f.toString())?g.exec(f.toString())[1]:"<ANON>")+"("+h.join()+");").replace(/\n/g,"")}}var f;if(a instanceof Error&&typeof arguments=="object"&&arguments.callee)f=d(a,b);else try{({}).sds()}catch(g){f=d(g,arguments)}return f.replace(/\n/g," <= ")}return{stack:e,warn:function(a,d){b(write.apply(null,arguments),"warn")},error:function(a,d){b(write.apply(null,arguments),"error")},isDebugMode:a}}()});Jx().$package(function(d){var a=function(){function d(){if(!E){try{var a=r.getElementsByTagName("body")[0].appendChild(r.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}E=!0;for(var a=F.length,c=0;c<a;c++)F[c]()}}function j(a){E?a():F[F.length]=a}function b(a){if(typeof z.addEventListener!=u)z.addEventListener("load",a,!1);else if(typeof r.addEventListener!=u)r.addEventListener("load",a,!1);else if(typeof z.attachEvent!=u)q(z,"onload",a);else if(typeof z.onload=="function"){var b=z.onload;z.onload=function(){b();a()}}else z.onload=a}function e(){var a=r.getElementsByTagName("body")[0],b=r.createElement(w);b.style.position="absolute";b.style.left="-9999px";b.style.top="-9999px";b.style.width="1px";b.style.height="1px";b.setAttribute("type",y);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=u){var e=c.GetVariable("$version");if(e)e=e.split(" ")[1].split(","),t.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}else if(d<10){d++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;h()})()}else h()}function h(){var a=D.length;if(a>0)for(var b=0;b<a;b++){var c=D[b].id,d=D[b].callbackFn,e={success:!1,id:c};if(t.pv[0]>0){var h=l(c);if(h)if(v(D[b].swfVersion)&&!(t.wk&&t.wk<312)){if(m(c,!0),d)e.success=!0,e.ref=g(c),d(e)}else if(D[b].expressInstall&&f()){e={};e.data=D[b].expressInstall;e.width=h.getAttribute("width")||"0";e.height=h.getAttribute("height")||"0";if(h.getAttribute("class"))e.styleclass=h.getAttribute("class");if(h.getAttribute("align"))e.align=h.getAttribute("align");for(var i={},h=h.getElementsByTagName("param"),j=h.length,p=0;p<j;p++)h[p].getAttribute("name").toLowerCase()!="movie"&&(i[h[p].getAttribute("name")]=h[p].getAttribute("value"));n(e,i,c,d)}else k(h),d&&d(e)}else if(m(c,!0),d){if((c=g(c))&&typeof c.SetVariable!=u)e.success=!0,e.ref=c;d(e)}}}function g(a){var b=null;if((a=l(a))&&a.nodeName=="OBJECT")typeof a.SetVariable!=u?b=a:(a=a.getElementsByTagName(w)[0])&&(b=a);return b}function f(){return!J&&v("6.0.65")&&(t.win||t.mac)&&!(t.wk&&t.wk<312)}function n(a,b,c,d){J=!0;L=d||null;O={success:!1,id:c};var e=l(c);if(e){e.nodeName=="OBJECT"?(H=o(e),K=null):(H=e,K=c);a.id=B;if(typeof a.width==u||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==u||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";r.title=r.title.slice(0,47)+" - Flash Player Installation";d=t.ie&&t.win?"ActiveX":"PlugIn";d="MMredirectURL="+z.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+r.title;typeof b.flashvars!=u?b.flashvars+="&"+d:b.flashvars=d;if(t.ie&&t.win&&e.readyState!=4)d=r.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}();p(a,b,c)}}function k(a){if(t.ie&&t.win&&a.readyState!=4){var b=r.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(o(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(o(a),a)}function o(a){var b=r.createElement("div");if(t.win&&t.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(w)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(a[d].nodeType==1&&a[d].nodeName=="PARAM")&&a[d].nodeType!=8&&b.appendChild(a[d].cloneNode(!0));return b}function p(a,b,c){var d,e=l(c);if(t.wk&&t.wk<312)return d;if(e){if(typeof a.id==u)a.id=c;if(t.ie&&t.win){var f="",g;for(g in a)if(a[g]!=Object.prototype[g])g.toLowerCase()=="data"?b.movie=a[g]:g.toLowerCase()=="styleclass"?f+=' class="'+a[g]+'"':g.toLowerCase()!="classid"&&(f+=" "+g+'="'+a[g]+'"');g="";for(var h in b)b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";I[I.length]=a.id;d=l(a.id)}else{h=r.createElement(w);h.setAttribute("type",y);for(var i in a)a[i]!=Object.prototype[i]&&(i.toLowerCase()=="styleclass"?h.setAttribute("class",a[i]):i.toLowerCase()!="classid"&&h.setAttribute(i,a[i]));for(f in b)b[f]!=Object.prototype[f]&&f.toLowerCase()!="movie"&&(a=h,g=f,i=b[f],c=r.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",i),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}}return d}function c(a){var b=l(a);if(b&&b.nodeName=="OBJECT")t.ie&&t.win?(b.style.display="none",function(){if(b.readyState==4){var c=l(a);if(c){for(var d in c)typeof c[d]=="function"&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function l(a){var b=null;try{b=r.getElementById(a)}catch(c){}return b}function q(a,b,c){a.attachEvent(b,c);G[G.length]=[a,b,c]}function v(a){var b=t.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function s(a,b,c,d){if(!t.ie||!t.mac){var e=r.getElementsByTagName("head")[0];if(e){c=c&&typeof c=="string"?c:"screen";d&&(M=C=null);if(!C||M!=c)d=r.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),C=e.appendChild(d),t.ie&&t.win&&typeof r.styleSheets!=u&&r.styleSheets.length>0&&(C=r.styleSheets[r.styleSheets.length-1]),M=c;t.ie&&t.win?C&&typeof C.addRule==w&&C.addRule(a,b):C&&typeof r.createTextNode!=u&&C.appendChild(r.createTextNode(a+" {"+b+"}"))}}}function m(a,b){if(P){var c=b?"visible":"hidden";E&&l(a)?l(a).style.visibility=c:s("#"+a,"visibility:"+c)}}function A(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=u?encodeURIComponent(a):a}var u="undefined",w="object",y="application/x-shockwave-flash",B="SWFObjectExprInst",z=window,r=document,x=navigator,N=!1,F=[function(){N?e():h()}],D=[],I=[],G=[],H,K,L,O,E=!1,J=!1,C,M,P=!0,t=function(){var a=typeof r.getElementById!=u&&typeof r.getElementsByTagName!=u&&typeof r.createElement!=u,b=x.userAgent.toLowerCase(),c=x.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\u000b1",f=[0,0,0],g=null;if(typeof x.plugins!=u&&typeof x.plugins["Shockwave Flash"]==w){if((g=x.plugins["Shockwave Flash"].description)&&!(typeof x.mimeTypes!=u&&x.mimeTypes[y]&&!x.mimeTypes[y].enabledPlugin))N=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof z.ActiveXObject!=u)try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(h&&(g=h.GetVariable("$version")))e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(i){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){t.w3&&((typeof r.readyState!=u&&r.readyState=="complete"||typeof r.readyState==u&&(r.getElementsByTagName("body")[0]||r.body))&&d(),E||(typeof r.addEventListener!=u&&r.addEventListener("DOMContentLoaded",d,!1),t.ie&&t.win&&(r.attachEvent("onreadystatechange",function(){r.readyState=="complete"&&(r.detachEvent("onreadystatechange",arguments.callee),d())}),z==top&&function(){if(!E){try{r.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}d()}}()),t.wk&&function(){E||(/loaded|complete/.test(r.readyState)?d():setTimeout(arguments.callee,0))}(),b(d)))})();(function(){t.ie&&t.win&&window.attachEvent("onunload",function(){for(var b=G.length,d=0;d<b;d++)G[d][0].detachEvent(G[d][1],G[d][2]);b=I.length;for(d=0;d<b;d++)c(I[d]);for(var e in t)t[e]=null;t=null;for(var f in a)a[f]=null;a=null})})();return{registerObject:function(a,b,c,d){if(t.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;D[D.length]=e;m(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(t.w3)return g(a)},embedSWF:function(a,b,c,d,e,g,h,i,l,k){var q={success:!1,id:b};t.w3&&!(t.wk&&t.wk<312)&&a&&b&&c&&d&&e?(m(b,!1),j(function(){c+="";d+="";var j={};if(l&&typeof l===w)for(var o in l)j[o]=l[o];j.data=a;j.width=c;j.height=d;o={};if(i&&typeof i===w)for(var s in i)o[s]=i[s];if(h&&typeof h===w)for(var r in h)typeof o.flashvars!=u?o.flashvars+="&"+r+"="+h[r]:o.flashvars=r+"="+h[r];if(v(e))s=p(j,o,b),j.id==b&&m(b,!0),q.success=!0,q.ref=s;else if(g&&f()){j.data=g;n(j,o,b,k);return}else m(b,!0);k&&k(q)})):k&&k(q)},switchOffAutoHideShow:function(){P=!1},ua:t,getFlashPlayerVersion:function(){return{major:t.pv[0],minor:t.pv[1],release:t.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(a,b,c){if(t.w3)return p(a,b,c)},showExpressInstall:function(a,b,c,d){t.w3&&f()&&n(a,b,c,d)},removeSWF:function(a){t.w3&&c(a)},createCSS:function(a,b,c,d){t.w3&&s(a,b,c,d)},addDomLoadEvent:j,addLoadEvent:b,getQueryParamValue:function(a){var b=r.location.search||r.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return A(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return A(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(J){var a=l(B);if(a&&H){a.parentNode.replaceChild(H,a);if(K&&(m(K,!0),t.ie&&t.win))H.style.display="block";L&&L(O)}J=!1}}}}();d.swfobject=a;(function(){var a=navigator.appVersion.indexOf("MSIE")!=-1?!0:!1,j=navigator.appVersion.toLowerCase().indexOf("win")!=-1?!0:!1,b=navigator.userAgent.indexOf("Opera")!=-1?!0:!1;d.GetSwfVer=function(){var d=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var d=navigator.plugins["Shockwave Flash"+(navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"")].description.split(" "),h=d[2].split("."),g=h[0],h=h[1],f=d[3];f==""&&(f=d[4]);f[0]=="d"?f=f.substring(1):f[0]=="r"&&(f=f.substring(1),f.indexOf("d")>0&&(f=f.substring(0,f.indexOf("d"))));d=g+"."+h+"."+f}}else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1)d=4;else if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1)d=3;else if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1)d=2;else if(a&&j&&!b){try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),g=h.GetVariable("$version")}catch(n){}if(!g)try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),g="WIN 6,0,21,0",h.AllowScriptAccess="always",g=h.GetVariable("$version")}catch(k){}if(!g)try{h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),g=h.GetVariable("$version")}catch(o){}if(!g)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),g="WIN 3,0,18,0"}catch(p){}if(!g)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),g="WIN 2,0,0,11"}catch(c){g=-1}d=g}return d}})()});Jx().$package(function(d){var a=d.dom,i=d.event,j=d.browser,b,e,h,g,f,n,k,o;d.sound=d.sound||{};n={_volume:100,_boolMute:!1,_url:"",_id:-1,init:function(){throw"init does not implement a required interface";},load:function(){throw"load does not implement a required interface";},getVolume:function(){return this._volume},setVolume:function(a){return!isNaN(a)&&a>=0&&a<=100?(this._volume=a,this._correctVolume(),!0):!1},_correctVolume:function(){this._setDirectVolume(this._volume*d.sound.Global._volume*!this._boolMute*!d.sound.Global._boolMute/100)},_setDirectVolume:function(){throw"_setDirectVolume does not implement a required interface";},mute:function(){if(!this._boolMute)this._boolMute=!0,this._correntVolume()},unMute:function(){if(this._boolMute)this._boolMute=!1,this._correntVolume()},isMute:function(){return this._boolMute},play:function(){throw"play does not implement a required interface";},pause:function(){throw"pause does not implement a required interface";},stop:function(){throw"stop does not implement a required interface";},getDuration:function(){throw"getDuration does not implement a required interface";},getPosition:function(){throw"getPosition does not implement a required interface";},setPosition:function(){throw"setPosition does not implement a required interface";},free:function(){throw"free does not implement a required interface";}};e={init:function(b,c,d){var e=this;this._needEventSupport=!!d;this._url=b;this._id=g.length;if(c)c=new Audio,c.id="audioSoundObject_"+this._id,this._onloadCallback=function(){e.play();e._obj.removeEventListener("canplay",e._onloadCallback,!1);e._onloadCallback=null},c.addEventListener("canplay",this._onloadCallback,!1),a.id("sound_object_container").appendChild(c),this._obj=c,this.load.call(this,b);g.push(this)},load:function(b){var c=this;if(b)this._url=b;else if(!this._url)return;if(!this._obj)b=new Audio,b.id="audioSoundObject_"+this._id,this._needEventSupport&&(b.addEventListener("durationchange",function(){i.notifyObservers(c,"durationchange")},!1),b.addEventListener("timeupdate",function(){i.notifyObservers(c,"timeupdate")},!1),b.addEventListener("canplay",function(){i.notifyObservers(c,"canplay")},!1),b.addEventListener("ended",function(){i.notifyObservers(c,"ended")},!1),b.addEventListener("play",function(){i.notifyObservers(c,"play")},!1),b.addEventListener("pause",function(){i.notifyObservers(c,"pause")},!1),b.addEventListener("progress",function(){i.notifyObservers(c,"progress")},!1),b.addEventListener("error",function(){i.notifyObservers(c,"error")},!1)),a.id("sound_object_container").appendChild(b),this._obj=b;this._obj.src=this._url;j.mobileSafari&&this._obj.load()},_setDirectVolume:function(a){if(this._obj)this._obj.volume=a/100},play:function(){this._obj&&this._obj.play()},pause:function(){if(this._obj){if(this._onloadCallback)this._obj.removeEventListener("canplay",this._onloadCallback,!1),this._onloadCallback=null;this._obj.pause()}},stop:function(){this._obj&&(this._obj.pause(),this.setPosition(0))},getDuration:function(){return!this._obj?0:this._obj.duration},getPosition:function(){return!this._obj?0:this._obj.currentTime},setPosition:function(a){if(!this._obj)return!1;var b=this._obj;try{return a>=0&&a<b.duration?(b.currentTime=parseFloat(a),!0):!1}catch(d){return!1}},buffered:function(){if(!this._obj)return 0;var a=this._obj;return!a.buffered.length?0:a.buffered.end(0)},free:function(){if(this._obj){var b=this._obj;b.pause();a.id("sound_object_container").removeChild(b);this._obj=null}g[this._id]=null}};h={init:function(b,c,d){this._needEventSupport=!!d;this._url=b;this._id=g.length;if(c)f?this._obj=f:(c=new Audio,c.id="audioSoundObject_"+this._id,a.id("sound_object_container").appendChild(c),f=this._obj=c,this.load.call(this,b));g.push(this)},load:function(b){var c=this;if(b)this._url=b;else if(!this._url)return;if(!this._obj)if(f)this._obj=f;else{var d=new Audio;d.id="audioSoundObject_"+this._id;a.id("sound_object_container").appendChild(d);f=this._obj=d}if(this._needEventSupport&&!this._hashEventSupport)d=this._obj,this._hashEventSupport=!0,d.addEventListener("durationchange",function(){d._inject||i.notifyObservers(c,"durationchange")},!1),d.addEventListener("timeupdate",function(){d._inject||i.notifyObservers(c,"timeupdate")},!1),d.addEventListener("canplay",function(){d._inject||i.notifyObservers(c,"canplay")},!1),d.addEventListener("ended",function(){d._inject||i.notifyObservers(c,"ended")},!1),d.addEventListener("play",function(){d._inject||i.notifyObservers(c,"play")},!1),d.addEventListener("pause",function(){d._inject||i.notifyObservers(c,"pause")},!1),d.addEventListener("progress",function(){d._inject||i.notifyObservers(c,"progress")},!1),d.addEventListener("error",function(){d._inject||i.notifyObservers(c,"error")},!1);this._obj.src=this._url;j.mobileSafari&&this._obj.load()},_setDirectVolume:function(a){if(this._obj)this._obj.volume=a/100},play:function(a,b){if(this._obj){if(a){this._obj._inject=!0;var d,e,f=this;if(!this._obj.paused)d=this._obj.src,this._obj.ended||(e=this._obj.currentTime+0.01);this.load(b);var g=function(){f._obj.removeEventListener("ended",g,!1);f._obj._inject=!1;if(d&&(f._obj.src=d,f._obj.muted=!0,f._obj.load(),e)){var a=function(){try{f._obj.currentTime=e,f._obj.muted=!1,f._obj.play()}catch(b){setTimeout(a,1E3)}};a()}};this._obj.addEventListener("ended",g,!1);setTimeout(function(){f._obj._inject&&g()},3E3)}this._obj.play()}},pause:function(){this._obj&&this._obj.pause()},stop:function(){this._obj&&(this._obj.pause(),this.setPosition(0))},getDuration:function(){return!this._obj?0:this._obj.duration},getPosition:function(){return!this._obj?0:this._obj.currentTime},setPosition:function(a){if(!this._obj)return!1;var b=this._obj;try{return a>=0&&a<b.duration?(b.currentTime=parseFloat(a),!0):!1}catch(d){return!1}},buffered:function(){if(!this._obj)return 0;var a=this._obj;return!a.buffered.length?0:a.buffered.end(0)},free:function(){if(this._obj){var b=this._obj;b.pause();a.id("sound_object_container").removeChild(b);this._obj=null}g[this._id]=null}};b={init:function(b,c,d){this._fid=-1;this._needEventSupport=!!d;this._url=b;this._id=g.length;if(c)this._fid=a.id("JxSwfSound_Flash").loadSound(this._url,-1,!0),this._correctVolume();g.push(this)},load:function(b){if(b)this._url=b;else if(!this._url)return;b=a.id("JxSwfSound_Flash");this._fid!=-1&&b.free(this._fid);this._fid=b.loadSound(this._url,this._needEventSupport?this._id:-1,!1);this._correctVolume()},_setDirectVolume:function(b){this._fid!=-1&&a.id("JxSwfSound_Flash").setVolume(this._fid,b)},play:function(){this._fid!=-1&&a.id("JxSwfSound_Flash").playSound(this._fid)},pause:function(){this._fid!=-1&&a.id("JxSwfSound_Flash").pauseSound(this._fid)},stop:function(){this._fid!=-1&&a.id("JxSwfSound_Flash").stopSound(this._fid)},getDuration:function(){return this._fid==-1?0:a.id("JxSwfSound_Flash").getDuration(this._fid)},getPosition:function(){return this._fid==-1?0:a.id("JxSwfSound_Flash").getPosition(this._fid)},setPosition:function(b){return this._fid==-1?!1:a.id("JxSwfSound_Flash").setPosition(this._fid,b)},buffered:function(){return this._fid==-1?0:a.id("JxSwfSound_Flash").getBuffered(this._fid)},free:function(){this._fid!=-1&&a.id("JxSwfSound_Flash").free(this._fid);g[this._id]=null}};k=function(b){b==void 0&&(b="./swf/jxswfsound.swf");var c={id:"JxSwfSound_Flash",name:"JxSwfSound_Flash"},e={menu:"false",wmode:"transparent",swLiveConnect:"true",allowScriptAccess:"always"},f=a.node("div",{id:"swfSound_Flash_div"}),g=a.id("sound_object_container");g.appendChild(f);a.setStyle(g,"display","");try{d.swfobject.embedSWF(b,"swfSound_Flash_div","1","1","8.0.0","./swf/expressInstall.swf",!1,e,c)}catch(h){d.error("J.Sound module error: "+h.message,"Sound")}};o=function(a,b){var d=g[a];d&&i.notifyObservers(d,b)};g=[];switch(d.browser.chrome?1:d.platform.iPad?4:window.Audio&&(new Audio).canPlayType("audio/mpeg")?3:d.browser.plugins.flash>=9?1:0){case 1:d.sound=new d.Class(d.extend({},n,b));d.sound.isReady=!1;d.sound.init=function(b){if(!d.sound.isReady){window.JxSwfSoundOnLoadCallback=function(){d.sound.isReady=!0;var b=a.id("sound_object_container");a.setStyle(b,"width","1px");a.setStyle(b,"height","1px");i.notifyObservers(d.sound,"ready")};window.soundEventDispatcher=o;var c=a.node("div",{id:"sound_object_container",style:"position:absolute;left:0;top:0;width:100px;height:100px;overflow:hidden;"});(document.body||document.documentElement).appendChild(c);k(b)}};break;case 3:d.sound=new d.Class(d.extend({},n,e));d.sound.isReady=!1;d.sound.init=function(){if(!d.sound.isReady){var b=a.node("div",{id:"sound_object_container",style:"position:absolute;left:0;top:0;width:1px;height:1px;overflow:hidden;"});(document.body||document.documentElement).appendChild(b);d.sound.isReady=!0}};break;case 4:d.sound=new d.Class(d.extend({},n,h));d.sound.isReady=!1;d.sound.init=function(){if(!d.sound.isReady){var b=a.node("div",{id:"sound_object_container",style:"position:absolute;left:0;top:0;width:1px;height:1px;overflow:hidden;"});(document.body||document.documentElement).appendChild(b);d.sound.isReady=!0}};break;default:d.sound=new d.Class(d.extend({},n,{init:function(){},load:function(){},_correctVolume:function(){},play:function(){},pause:function(){},stop:function(){},getDuration:function(){return-1},getPosition:function(){return 0},setPosition:function(){return!0},free:function(){}})),d.sound.init=function(){},d.sound.isReady=!1}d.sound.Global={_volume:100,_boolMute:!1,getVolume:function(){return this._volume},setVolume:function(a){if(!isNaN(a)&&a>=0&&a<=100){this._volume=a;for(var a=0,b=g.length;a<b;a++)g[a]!=null&&g[a]._correctVolume();return!0}return!1},mute:function(){if(!this._boolMute){this._boolMute=!0;for(var a=0,b=g.length;a<b;a++)g[a]!=null&&g[a]._correctVolume()}},unMute:function(){if(this._boolMute){this._boolMute=!1;for(var a=0,b=g.length;a<b;a++)g[a]!=null&&g[a]._correctVolume()}},isMute:function(){return this._boolMute},removeAll:function(){for(var a=0,b=g.length;a<b;a++)g[a]!=null&&g[a].free()}}});Jx().$package(function(d){var a=d.dom,i=d.browser.ie&&(d.browser.ie<9||a.getDoc().documentMode<9),d=new d.Class({init:function(d){this.el=d;this.type=0;this.type2class=["","rotation-90deg","rotation-180deg","rotation-270deg"];i?a.createStyleNode("\t\t\t\t\t.rotation-90deg {\t\t\t\t\t\tfilter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);\t\t\t\t\t}\t\t\t\t\t.rotation-180deg {\t\t\t\t\t\tfilter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\t\t\t\t\t}\t\t\t\t\t.rotation-270deg {\t\t\t\t\t\tfilter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);\t\t\t\t\t}\t\t\t\t","rotation-style"):a.createStyleNode("\t\t\t\t\t.rotation-90deg {\t\t\t\t\t\t-moz-transform:rotate(90deg);\t\t\t\t\t\t-webkit-transform:rotate(90deg);\t\t\t\t\t\t-o-transform: rotate(90deg);\t\t\t\t\t\t-ms-transform: rotate(90deg);\t\t\t\t\t\ttransform:rotate(90deg);\t\t\t\t\t}\t\t\t\t\t.rotation-180deg {\t\t\t\t\t\t-moz-transform:rotate(180deg);\t\t\t\t\t\t-webkit-transform:rotate(180deg);\t\t\t\t\t\t-o-transform: rotate(180deg);\t\t\t\t\t\t-ms-transform: rotate(180deg);\t\t\t\t\t\ttransform:rotate(180deg);\t\t\t\t\t}\t\t\t\t\t.rotation-270deg {\t\t\t\t\t\t-moz-transform:rotate(270deg);\t\t\t\t\t\t-webkit-transform:rotate(270deg);\t\t\t\t\t\t-o-transform: rotate(270deg);\t\t\t\t\t\t-ms-transform: rotate(270deg);\t\t\t\t\t\ttransform:rotate(270deg);\t\t\t\t\t}\t\t\t\t","rotation-style");styleText=null},uninit:function(){this.el=null;this.type=0},left:function(){var a=this.type;a-=1;-1===a&&(a=3);return this.rotate(a)},right:function(){var a=this.type;a+=1;4===a&&(a=0);return this.rotate(a)},rotate:function(d){d=parseInt(d,10);if(isNaN(d)||!(d in this.type2class)||d===this.type)return!1;a.removeClass(this.el,this.type2class[this.type]);a.addClass(this.el,this.type2class[d]);var b=d%2!==this.type%2;this.type=d;b&&this.center();return this.type},center:function(){if(i&&"absolute"===a.getStyle(this.el,"position")){var d=parseInt(a.getStyle(this.el,"left"),10),b=parseInt(a.getStyle(this.el,"top"),10),e=parseInt(a.getStyle(this.el,"width"),10),h=parseInt(a.getStyle(this.el,"height"),10);if(0===this.type%2)var g=e,e=h,h=g;e=(h-e)/2;d-=e;b+=e;a.setStyle(this.el,"left",d+"px");a.setStyle(this.el,"top",b+"px")}},reset:function(){a.removeClass(this.el,this.type2class[this.type]);this.type=0},isLandscape:function(){return this.type%2}});Jx.ui=Jx.ui||{};Jx.ui.Rotation=d});